[{"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\reportWebVitals.js":"1","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\App.js":"2","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\utils.js":"3","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Simulations.js":"4","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\index.js":"5","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Academic.js":"6","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Financing.js":"7","C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Management.js":"8"},{"size":362,"mtime":499162500000,"results":"9","hashOfConfig":"10"},{"size":979,"mtime":1606583907979,"results":"11","hashOfConfig":"10"},{"size":27516,"mtime":1609830079791,"results":"12","hashOfConfig":"10"},{"size":9889,"mtime":1607567613584,"results":"13","hashOfConfig":"10"},{"size":547,"mtime":1606361869531,"results":"14","hashOfConfig":"10"},{"size":85661,"mtime":1609832520644,"results":"15","hashOfConfig":"10"},{"size":74769,"mtime":1609814153072,"results":"16","hashOfConfig":"10"},{"size":44006,"mtime":1607384244104,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"1cforyk",{"filePath":"21","messages":"22","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":57,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":56,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":45,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"30"},"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\reportWebVitals.js",[],["42","43"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\App.js",["44","45"],"import React, { Component, useState } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch, HashRouter } from 'react-router-dom';\n\nimport Simulations from './components/Simulations';\nimport Academic from './components/Academic';\nimport Financing from './components/Financing';\nimport Management from './components/Management';\n// \"handsontable\": \"^8.2.0\",\n\nclass App extends Component {\n  render() { \n\n    return (\n      <div className=\"App\">\n\n           <BrowserRouter>\n                <div>\n                  {/* <Navbar /> */}\n                  <Switch>\n                    <Route path=\"/\" component={Simulations} exact/>\n                    <Route path=\"/academic\" component={Academic}/>\n                    <Route path=\"/financing\" component={Financing}/>\n                    <Route path=\"/management\" component={Management}/>\n                  </Switch>\n                </div> \n            </BrowserRouter>\n      </div>\n    );\n  }\n}\n\nexport default App;\n",["46","47"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\utils.js",["48"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Simulations.js",["49","50","51","52","53","54","55","56","57","58","59","60","61","62","63"],"import React, { Component, useState } from 'react';\r\nimport ReactDOM from \"react-dom\"\r\nimport 'handsontable/dist/handsontable.full.css';\r\nimport '../App.css';\r\nimport {\r\n  Collapse,\r\n  Navbar,\r\n  NavbarToggler,\r\n  NavbarBrand,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Jumbotron,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  Button,\r\n  Table, Modal, ModalHeader, ModalFooter, ModalBody, Form, FormGroup, Label, Input, ListGroup, Card, CardTitle, CardText\r\n} from 'reactstrap';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Link,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nlet simulation_type = \"\";\r\n\r\nlet num_prof = 0;\r\n\r\nlet account_info = [[\"Professor\", \"professor\"], [\"TA1\", \"ta1\"], [\"TA2\", \"ta2\"], [\"Family1\", \"family1\"], [\"Family2\", \"family2\"], [\"Family3\", \"family3\"]];\r\n\r\nclass Simulation extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"hot\";\r\n    this.hotTableComponent = React.createRef();\r\n    this.state = {\r\n      collapsed: false,\r\n      rows: [],\r\n      cols: [],\r\n      attri: [],\r\n      items: Array.from({ length: 0 }),\r\n      hasMore: false,\r\n      load_from_buffer_to_matrix: false, \r\n\r\n      //retrieval display variables\r\n      hasMoreResult: false,\r\n      resultItems: Array.from({ length: 0 }), \r\n      load_result_from_buffer_to_matrix: false, \r\n\r\n      redirect_import_page: false, \r\n      import_page_link: '/result', \r\n\r\n      redirect_academic_page: false,\r\n      academic_page_link: '/academic',\r\n\r\n      redirect_management_page: false,\r\n      management_page_link: '/management',\r\n\r\n      redirect_financing_page: false,\r\n      financing_page_link: '/financing',\r\n\r\n      data_original: [], \r\n      check_cell_update: false, \r\n\r\n      test_block: \"ORIGINAL MESSAGE\", \r\n      users:[], \r\n      user_text_block: \"\", \r\n\r\n      isSelectPromptOpen: false, \r\n      user_name: \"\", \r\n\r\n      edit_message: \"Last Edit: No modification yet\", \r\n      history: [], \r\n      isShowHistoryOpen: false, \r\n\r\n      isConflictModalOpen: false, \r\n\r\n      transaction_mode: false, \r\n      isSharedLockRejectOpen: false,\r\n      isExclusiveLockRejectOpen: false, \r\n\r\n      isLoginModalOpen: true, \r\n      username: \"\", \r\n      password: \"\", \r\n      isLoginRejectOpen: false\r\n    }\r\n\r\n    this.toggleSelectionPrompt = this.toggleSelectionPrompt.bind()\r\n    this.toggleLoginModal = this.toggleLoginModal.bind();\r\n    this.toggleLoginRejectModal = this.toggleLoginRejectModal.bind();\r\n  }\r\n  \r\n  toggleLoginRejectModal = () => {\r\n    this.setState({\r\n      isLoginRejectOpen: !this.state.isLoginRejectOpen\r\n    })\r\n  }\r\n\r\n  toggleLoginModal = () => {\r\n    this.setState({\r\n      isLoginModalOpen: !this.state.isLoginModalOpen\r\n    })\r\n  }\r\n\r\n  toggleSelectionPrompt = () => {\r\n    this.setState({\r\n        isSelectPromptOpen: !this.state.isSelectPromptOpen\r\n    })\r\n  }\r\n\r\n  redirect_import = () => {\r\n    this.setState( {\r\n      redirect_import_page: true\r\n    })\r\n  }\r\n\r\n  select_simulation = (e) => {\r\n    e.preventDefault();\r\n    simulation_type = e.target.name;\r\n    if (simulation_type === \"academic\") {\r\n      this.setState({\r\n        redirect_academic_page: true\r\n      })\r\n    }\r\n    if (simulation_type === \"management\") {\r\n      this.setState({\r\n        redirect_management_page: true\r\n      })\r\n    }\r\n    if (simulation_type === \"financing\") {\r\n      this.setState({\r\n        redirect_financing_page: true\r\n      })\r\n    }\r\n  }\r\n\r\n  handleLoginChange = (e) => {\r\n    this.setState({\r\n        [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  onLoginFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    let username = this.state.username;\r\n    let password = this.state.password;\r\n\r\n    let account_found = false;\r\n    for (var i = 0; i < account_info.length; i++) {\r\n      if (username === account_info[i][0] && password === account_info[i][1]) {\r\n        account_found = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // login success\r\n    if (account_found) {\r\n      if (username === \"Professor\" || username === \"TA1\" || username === \"TA2\") {\r\n        if (username === \"Professor\") {\r\n          num_prof++;\r\n        }\r\n        console.log(\"number of prof is: \", num_prof);\r\n        this.setState({\r\n          redirect_academic_page: true\r\n        });\r\n      } \r\n      else if (username === \"Family1\" || username === \"Family2\" || username === \"Family3\") {\r\n        this.setState({\r\n          redirect_financing_page: true\r\n        });\r\n      }\r\n    } \r\n    \r\n    // reject login\r\n    else {\r\n      if (this.state.isLoginRejectOpen === false) {\r\n        this.toggleLoginRejectModal();\r\n      }\r\n      this.toggleLoginModal();\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    if (this.state.redirect_import_page) {\r\n      return <Redirect to={this.state.import_page_link} />\r\n    }\r\n    if (this.state.redirect_academic_page) {\r\n      return <Redirect to={this.state.academic_page_link} />\r\n    }\r\n    if (this.state.redirect_management_page) {\r\n      return <Redirect to={this.state.management_page_link} />\r\n    }\r\n    if (this.state.redirect_financing_page) {\r\n      return <Redirect to={this.state.financing_page_link} />\r\n    }\r\n    return (\r\n      <div className=\"App\">\r\n        <script src=\"node_modules/handsontable/dist/handsontable.full.min.js\"></script>\r\n        <link href=\"node_modules/handsontable/dist/handsontable.full.min.css\" rel=\"stylesheet\" media=\"screen\"></link>\r\n         <Jumbotron className='logo-jumbo'>\r\n          </Jumbotron >\r\n          <div>\r\n          <Jumbotron >                \r\n                  <h1 className=\"display-3\">Hi {this.state.user_name}, welcome to spreadsheet web!</h1>\r\n                  <p className=\"lead\">Please click the login button below and enter your assigned username and password</p>\r\n                  <hr className=\"my-2\" />\r\n                  <p>{this.state.user_text_block}</p>\r\n                  <p className=\"lead\">\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleLoginModal} >Login</Button>\r\n                  </p>\r\n\r\n                  <Modal isOpen={this.state.isLoginRejectOpen} toggle={this.toggleLoginRejectModal}>\r\n                    <ModalHeader toggle={this.toggleLoginRejectModal}>Login Fail</ModalHeader>\r\n                    <ModalBody>\r\n                      Sorry, the username and password you entered do not match. Please try again!\r\n                    </ModalBody>\r\n\r\n                    <ModalFooter>\r\n                        <Button color=\"primary\" onClick={this.toggleLoginModal}>\r\n                          Try again\r\n                        </Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal isOpen={this.state.isLoginModalOpen} toggle={this.toggleLoginModal} >\r\n                    <ModalHeader toggle={this.toggleLoginModal}>Login</ModalHeader>\r\n                    <ModalBody>\r\n                      <Form onSubmit={this.onLoginFormSubmit}>\r\n                        <FormGroup>\r\n                          <Label for=\"username\">Please enter your username</Label>\r\n                          <Input type=\"text\" name=\"username\" id=\"username\" onChange={e => this.handleLoginChange(e)} />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                          <Label for=\"password\">Please enter your password</Label>\r\n                          <Input type=\"text\" name=\"password\" id=\"password\" onChange={e => this.handleLoginChange(e)} />\r\n                        </FormGroup>\r\n                        <Button color=\"primary\" type=\"submit\">Login</Button> {' '}\r\n                      </Form>\r\n                    </ModalBody>\r\n\r\n                    <ModalFooter>\r\n                        Forgot your userID? Well, check the document we sent you...\r\n                    </ModalFooter>\r\n                  </Modal>\r\n                  \r\n\r\n                  <Modal size='lg' isOpen={this.state.isSelectPromptOpen} >\r\n                    <ModalHeader >Please Choose Your Assigned Simulation </ModalHeader>\r\n                    <ModalBody>\r\n                        <Row>\r\n                            <Col sm=\"6\">\r\n                                <Card body>\r\n                                <CardTitle tag=\"h5\">Academic Simulation</CardTitle>\r\n                                <CardText>Simulation on a university class environmenH</CardText>\r\n                                <Button color=\"primary\" name=\"academic\" id=\"academic\" onClick={e => this.select_simulation(e)}> Choose This Simulation</Button>\r\n                                </Card>\r\n                            </Col>\r\n                            <Col sm=\"6\">\r\n                                <Card body>\r\n                                <CardTitle tag=\"h5\">Management Simulation</CardTitle>\r\n                                <CardText>Simulation on management of employee schedules and project progress</CardText>\r\n                                <Button color=\"info\" name=\"management\" id=\"management\" onClick={e => this.select_simulation(e)}>Choose This Simulation</Button>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col sm=\"6\">\r\n                                <Card body>\r\n                                <CardTitle tag=\"h5\">Financing Simulation</CardTitle>\r\n                                <CardText>Simulation family or company financing, involving expenses and incomes</CardText>\r\n                                <Button color=\"primary\" name=\"financing\" id=\"financing\" onClick={e => this.select_simulation(e)}>Choose This Simulation</Button>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </ModalBody>\r\n                  </Modal>\r\n\r\n            {/* </Container> */}\r\n        </Jumbotron>\r\n        </div>\r\n\r\n        <hr />\r\n          \r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nexport default Simulation;\r\n",["64","65"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\index.js",[],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Academic.js",["66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Financing.js",["123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178"],"import React, { Component, useState } from 'react';\r\nimport ReactDOM from \"react-dom\"\r\nimport { HotTable } from '@handsontable/react';\r\n// import Handsontable from 'handsontable';\r\nimport 'handsontable/dist/handsontable.full.css';\r\nimport '../App.css';\r\nimport {\r\n  Navbar,\r\n  Row,\r\n  Col,\r\n  Jumbotron,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  Button,\r\n  Modal, ModalHeader, ModalFooter, ModalBody, Form, FormGroup, Label, Input, TabContent, TabPane, ButtonDropdown, Dropdown, DropdownToggle, DropdownMenu, DropdownItem\r\n} from 'reactstrap';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Link,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport classnames from 'classnames';\r\nimport io from \"socket.io-client\";\r\n\r\nconst Utils = require('../utils');\r\nlet utils = new Utils();\r\n\r\nlet monthly_expense_display = [];\r\nlet monthly_income_display = [];\r\nlet check_book_display = [];\r\nlet check_book2_display = [];\r\nlet check_book3_display = [];\r\nlet allowance_display = [];\r\nlet table_loaded = false;\r\n\r\nlet simulation_type = \"\";\r\n\r\n// A JSON object that keeps track of previous layout changes\r\nlet layout_changes = {\r\n  incoming: false,\r\n  layout_changed: false,\r\n  changes: [], // 1st element: action;  2nd element: index\r\n  start_idx: 0, \r\n  socketID: \"\"\r\n}\r\n\r\nlet col_headers = []\r\nlet monthly_expense_col_headers = [];\r\nlet monthly_income_col_headers = [];\r\nlet check_book_col_headers = [];\r\nlet check_book2_col_headers = [];\r\nlet check_book3_col_headers = [];\r\nlet allowance_col_headers = [];\r\n\r\nlet user_actions = []\r\n\r\nlet SCROLL_SIZE = 5;\r\n\r\nlet data = [], dataMatrix = [], columns = [], buffer = [], buffer_copy = [];\r\nlet load_error = [[0]];\r\nlet PREFETCH_SIZE = 50\r\nlet noData = true\r\nlet ATT_NUM = 7\r\nlet prev_scrolltop = 0\r\nlet data_display = []\r\nlet chn_copy = []\r\nlet change_detected = false;\r\n\r\nlet current_fetch_index = 1 //initial pre-prefetch index\r\nlet num_attr = 0;\r\n\r\nlet current_i = -1;\r\nlet current_j = -1;\r\nlet currently_editing = false;\r\n\r\nlet conflict_i = -1;\r\nlet conflict_j = -1;\r\nlet incoming_value = \"\";\r\nlet conflict_message = \"\";\r\n\r\nlet select_i = -1; \r\nlet select_j = -1;\r\n\r\nlet transaction_button = \"\";\r\nlet apply_read_only_lock_button = \"\";\r\nlet display_dataset_button = \"\";\r\n\r\nlet socket_id = \"\";\r\n\r\nlet pending_changes = {\r\n  data:[], // 2d array to store difference: y, value, x, \r\n  try_message: \"SENT MESSAGE! SUCCESS!\", \r\n  socketID: \"\",\r\n  user: \"\", \r\n  incoming: false\r\n}\r\n\r\nclass Financing extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"hot\";\r\n    this.hotTableComponent = React.createRef();\r\n    this.hotTableComponent1 = React.createRef();\r\n    this.hotTableComponent2 = React.createRef();\r\n    this.hotTableComponent3 = React.createRef();\r\n    this.hotTableComponent4 = React.createRef();\r\n    this.state = {\r\n      collapsed: false,\r\n      items: Array.from({ length: 0 }),\r\n      hasMore: false,\r\n      load_from_buffer_to_matrix: false, \r\n\r\n      //retrieval display variables\r\n      hasMoreResult: false,\r\n      resultItems: Array.from({ length: 0 }), \r\n      load_result_from_buffer_to_matrix: false, \r\n\r\n      import_page_link: '/result', \r\n\r\n      data_original: [], \r\n      check_cell_update: false, \r\n\r\n      test_block: \"ORIGINAL MESSAGE\", \r\n      users:[], \r\n      user_text_block: \"\", \r\n\r\n      isSelectPromptOpen: true, \r\n      user_name: \"\", \r\n\r\n      edit_message: \"Last Edit: No modification yet\", \r\n      history: [], \r\n      isShowHistoryOpen: false, \r\n\r\n      transaction_mode: false, \r\n      isSharedLockRejectOpen: false,\r\n      isExclusiveLockRejectOpen: false, \r\n\r\n      isInstructionOpen: true,\r\n      activeTab: '1', \r\n\r\n      redirect_link: \"\", \r\n      isRedirectConfirmOpen: false, \r\n      redirect: false, \r\n\r\n      isRestartModalOpen: false, \r\n      isNameModalOpen: false, \r\n\r\n      isCompleteConfirmationModalOpen: false, \r\n      name: \"\", \r\n      curr_table: \"monthly_expense\", \r\n\r\n      isLoadErrorModelOpen: false\r\n    }\r\n\r\n    // Socket io stuff =========================================================================================\r\n\r\n    this.socket = io('https://spreadsheetactions.herokuapp.com/');\r\n    // this.socket = io('localhost:3001');\r\n\r\n    this.socket.on('RECEIVE_ID', function(id){\r\n      layout_changes.socketID = id;\r\n      pending_changes.socketID = id;\r\n      change_id(id);\r\n    });\r\n\r\n    // update current list of online users when a new user joins\r\n    this.socket.on('ADD_NEW_USER', function(data) {\r\n      console.log(\"adding new user\");\r\n      addNewUser(data);\r\n    });\r\n\r\n    // update current list of online users when one user is disconnected\r\n    this.socket.on('CHANGE_CURRENT_USER', function(data) {\r\n      change_current_user(data);\r\n    });\r\n\r\n    // update the last edit message, as well as the entire edit history\r\n    this.socket.on('UPDATE_EDIT_MESSAGE', function(message_package) {\r\n      update_edit_message(message_package);\r\n    });\r\n    \r\n\r\n    const change_id = id => {\r\n      socket_id = id;\r\n    }\r\n\r\n    const addNewUser = data => {\r\n      this.setState({\r\n        history: data.history\r\n      })\r\n      change_current_user(data);\r\n    }\r\n\r\n    const change_current_user = data => {\r\n      if (data.simulation === \"financing\") {\r\n\r\n        this.setState({\r\n          users: data.current_users\r\n        });\r\n        let new_user_text = \"Currently Online: \";\r\n        for (var i = 0; i < this.state.users.length; i++) {\r\n          if (i == this.state.users.length - 1) {\r\n            new_user_text += this.state.users[i]\r\n          } else {\r\n            new_user_text += this.state.users[i] + \", \"\r\n          }\r\n        }\r\n        this.setState({\r\n          user_text_block: new_user_text\r\n        });\r\n      }\r\n    }\r\n\r\n    const update_edit_message = message_package => {\r\n      this.setState({\r\n        edit_message: message_package.new_message, \r\n        history: message_package.history\r\n      })\r\n    }\r\n\r\n    this.toggleSelectionPrompt = this.toggleSelectionPrompt.bind()\r\n    this.toggleNavbar = this.toggleNavbar.bind()\r\n    this.toggleInstructionModal = this.toggleInstructionModal.bind();\r\n    this.toggleNameModal = this.toggleNameModal.bind();\r\n    this.toggleRestartModal = this.toggleRestartModal.bind();\r\n    this.toggleCompleteConfirmModal = this.toggleCompleteConfirmModal.bind();\r\n    this.toggleLoadErrorModal = this.toggleLoadErrorModal.bind();\r\n  }\r\n\r\n  // fetch 50 rows of data into the buffer\r\n  async componentDidMount() {\r\n\r\n    // receive updates on spreadsheet from other users\r\n    this.socket.on('RECEIVE_MESSAGE', function(data){\r\n      addMessage(data);\r\n    });\r\n\r\n    const addMessage = data => {\r\n      // ignore if these actions come from this user itself\r\n      if (data.socketID === socket_id) {\r\n        return;\r\n      }\r\n\r\n      let change_table = data.data\r\n      for (var x = 0; x < change_table.length; x++) {\r\n\r\n        // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n        // [table_name, change_type, operation, direction, search_attribute, socket_id] for remove row\r\n        // [table_name, change_type, operation, value, search_attribute, socket_id] for insert row\r\n        if (change_table[x][1] === \"layout_change\") {\r\n          if (change_table[x][5] === socket_id) {\r\n            continue;\r\n          } else {\r\n            process_layout_changes(change_table[x]);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Extract data\r\n        let table = change_table[x][0]; // table corresponds to this change  \r\n        let value = change_table[x][2] // 1 --> actual value\r\n\r\n        // reflect each update to its corresponding table\r\n        try { // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          let x_coord = change_table[x][7];\r\n\r\n          if (table === \"monthly_expense\") {\r\n            for (var i = 0; i < monthly_expense_display.length; i++) {\r\n              if ((monthly_expense_display[i][0] === change_table[x][4] && change_table[x][4] !== \"\") || (monthly_expense_display[i][1] === change_table[x][5] && change_table[x][5] !== \"\")) {\r\n                monthly_expense_display[i][x_coord] = value;\r\n              }\r\n            }\r\n            \r\n          } else if (table === \"check_book\") {\r\n            for (var i = 0; i < check_book_display.length; i++) {\r\n              if ((check_book_display[i][0] === change_table[x][4] && change_table[x][4] !== \"\") || (check_book_display[i][1] === change_table[x][5] && change_table[x][5] !== \"\")) {\r\n                check_book_display[i][x_coord] = value;\r\n              }\r\n            }\r\n            \r\n          } else if (table === \"check_book2\") {\r\n            for (var i = 0; i < check_book2_display.length; i++) {\r\n              if ((check_book2_display[i][0] === change_table[x][4] && change_table[x][4] !== \"\") || (check_book2_display[i][1] === change_table[x][5] && change_table[x][5] !== \"\")) {\r\n                check_book2_display[i][x_coord] = value;\r\n              }\r\n            }\r\n            \r\n          } else if (table === \"check_book3\") {\r\n            for (var i = 0; i < check_book3_display.length; i++) {\r\n              if ((check_book3_display[i][0] === change_table[x][4] && change_table[x][4] !== \"\") || (check_book3_display[i][1] === change_table[x][5] && change_table[x][5] !== \"\")) {\r\n                check_book3_display[i][x_coord] = value;\r\n              }\r\n            }\r\n            \r\n          } else if (table === \"allowance\") {\r\n            for (var i = 0; i < allowance_display.length; i++) {\r\n              if ((allowance_display[i][0] === change_table[x][4] && change_table[x][4] !== \"\") || (allowance_display[i][1] === change_table[x][5] && change_table[x][5] !== \"\")) {\r\n                allowance_display[i][x_coord] = value;\r\n              }\r\n            }\r\n            \r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    const process_layout_changes = curr_changes => {\r\n      console.log(\"the new layout change is: \", curr_changes);\r\n      // [table_name, change_type, operation, direction, search_attribute, socket_id] for remove row\r\n      // [table_name, change_type, operation, value, search_attribute, socket_id, y_coord] for insert row\r\n\r\n      // get the current table for current change to process\r\n      let table_instance = \"\";\r\n      let table = \"\";\r\n      let headers = \"\";\r\n      if (curr_changes[0] === \"monthly_expense\") {\r\n        table_instance = this.hotTableComponent.current.hotInstance;\r\n        table = monthly_expense_display;\r\n        headers = monthly_expense_col_headers;\r\n      } else if (curr_changes[0] === \"check_book\") {\r\n        table_instance = this.hotTableComponent1.current.hotInstance;\r\n        table = check_book_display;\r\n        headers = check_book_col_headers;\r\n      } else if (curr_changes[0] === \"check_book2\") {\r\n        table_instance = this.hotTableComponent2.current.hotInstance;\r\n        table = check_book2_display;\r\n        headers = check_book2_col_headers;\r\n      } else if (curr_changes[0] === \"check_book3\") {\r\n        table_instance = this.hotTableComponent3.current.hotInstance;\r\n        table = check_book3_display;\r\n        headers = check_book3_col_headers;\r\n      } else if (curr_changes[0] === \"allowance\") {\r\n        table_instance = this.hotTableComponent4.current.hotInstance;\r\n        table = allowance_display;\r\n        headers = allowance_col_headers;\r\n      }\r\n\r\n      if (curr_changes[2] === \"remove_r\") {\r\n        // search for the row to delete\r\n        for (var index = 0; index < table.length; index++) {\r\n          if (table[index][0] === curr_changes[4]) {\r\n            pending_changes.incoming = true;\r\n            layout_changes.incoming = true;\r\n            table_instance.alter('remove_row', index, 1);\r\n            break;\r\n          }\r\n        }\r\n\r\n      } else if (curr_changes[2] === \"insert_r\") {\r\n\r\n        // find the column for writing in the first value\r\n        for (var j = 0; j < headers.length; j++) {\r\n          if (headers[j] === curr_changes[4]) {\r\n            table[curr_changes[6]][j] = curr_changes[3];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.start_transaction} >Start Transaction</Button>\r\n\r\n    // FIRST COMPONENT REF ========================================================================================\r\n    this.hotTableComponent.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n\r\n        try {\r\n          // call check_cell_change if original and new data differ\r\n          if (chn[0][2] !== chn[0][3] && (chn[0][3] === null || (chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") )) {\r\n            console.log(\"differ!\");\r\n            chn_copy = chn;\r\n            if (chn_copy[0][3] === null) {\r\n              chn_copy[0][3] = \"\";\r\n            }\r\n            change_detected = true;\r\n\r\n            // remove currently editing state\r\n            current_i = -1;\r\n            current_j = -1;\r\n            currently_editing = false;\r\n          }\r\n        }\r\n        catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false\r\n      } else {\r\n        if (source === \"ContextMenu.rowBelow\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"below\", index, \"monthly_expense\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"above\", index, \"monthly_expense\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.columnRight\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"right\", index, \"monthly_expense\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"left\", index, \"monthly_expense\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('beforeRemoveRow', function(index, amount) {\r\n      // [table_name, change_type, operation, direction, search_attribute]\r\n      if (pending_changes.incoming === true) {\r\n        pending_changes.incoming = false;\r\n      } else {\r\n        let temp = []\r\n        temp[0] = \"monthly_expense\";\r\n        temp[1] = \"layout_change\";\r\n        temp[2] = \"remove_r\";\r\n        temp[3] = null;\r\n        temp[4] = monthly_expense_display[index][0];\r\n        temp[5] = socket_id;\r\n        pending_changes.data.push(temp);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      console.log(\"after remove row index: \", index);\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_r\", null, index, \"monthly_expense\"]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_c\", null, index, \"monthly_expense\"]);\r\n      }\r\n    });\r\n\r\n    // SECOND COMPONENT REF ========================================================================================\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        try {\r\n          // call check_cell_change if original and new data differ\r\n          if (chn[0][2] !== chn[0][3] && (chn[0][3] === null || (chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") )) {\r\n            console.log(\"differ!\");\r\n            chn_copy = chn;\r\n            if (chn_copy[0][3] === null) {\r\n              chn_copy[0][3] = \"\";\r\n            }\r\n            change_detected = true;\r\n\r\n            // remove currently editing state\r\n            current_i = -1;\r\n            current_j = -1;\r\n            currently_editing = false;\r\n          }\r\n        }\r\n        catch (err) {\r\n          console.log(err)\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.rowBelow\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"below\", index, \"check_book\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"above\", index, \"check_book\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.columnRight\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"right\", index, \"check_book\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"left\", index, \"check_book\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('beforeRemoveRow', function(index, amount) {\r\n      // [table_name, change_type, operation, direction, search_attribute]\r\n      if (pending_changes.incoming === true) {\r\n        pending_changes.incoming = false;\r\n      } else {\r\n        let temp = []\r\n        temp[0] = \"check_book\";\r\n        temp[1] = \"layout_change\";\r\n        temp[2] = \"remove_r\";\r\n        temp[3] = null;\r\n        temp[4] = check_book_display[index][0];\r\n        temp[5] = socket_id;\r\n        pending_changes.data.push(temp);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_r\", null, index, \"check_book\"]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_c\", null, index, \"check_book\"]);\r\n      }\r\n    });\r\n\r\n    // THIRD COMPONENT REF ========================================================================================\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n\r\n        try {\r\n          // call check_cell_change if original and new data differ\r\n          if (chn[0][2] !== chn[0][3] && (chn[0][3] === null || (chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") )) {\r\n            console.log(\"differ!\");\r\n            chn_copy = chn;\r\n            if (chn_copy[0][3] === null) {\r\n              chn_copy[0][3] = \"\";\r\n            }\r\n            change_detected = true;\r\n\r\n            // remove currently editing state\r\n            current_i = -1;\r\n            current_j = -1;\r\n            currently_editing = false;\r\n          }\r\n        }\r\n        catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.rowBelow\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"below\", index, \"check_book2\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"above\", index, \"check_book2\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.columnRight\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"right\", index, \"check_book2\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"left\", index, \"check_book2\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('beforeRemoveRow', function(index, amount) {\r\n      // [table_name, change_type, operation, direction, search_attribute]\r\n      if (pending_changes.incoming === true) {\r\n        pending_changes.incoming = false;\r\n      } else {\r\n        let temp = []\r\n        temp[0] = \"check_book2\";\r\n        temp[1] = \"layout_change\";\r\n        temp[2] = \"remove_r\";\r\n        temp[3] = null;\r\n        temp[4] = check_book2_display[index][0];\r\n        temp[5] = socket_id;\r\n        pending_changes.data.push(temp);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_r\", null, index, \"check_book2\"]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_c\", null, index, \"check_book2\"]);\r\n      }\r\n    });\r\n\r\n    // FOURTH COMPONENT REF ========================================================================================\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        try {\r\n          // call check_cell_change if original and new data differ\r\n          if (chn[0][2] !== chn[0][3] && (chn[0][3] === null || (chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") )) {\r\n            console.log(\"differ!\");\r\n            chn_copy = chn;\r\n            if (chn_copy[0][3] === null) {\r\n              chn_copy[0][3] = \"\";\r\n            }\r\n            change_detected = true;\r\n\r\n            // remove currently editing state\r\n            current_i = -1;\r\n            current_j = -1;\r\n            currently_editing = false;\r\n          }\r\n        }\r\n        catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.rowBelow\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"below\", index, \"check_book3\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"above\", index, \"check_book3\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.columnRight\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"right\", index, \"check_book3\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"left\", index, \"check_book3\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('beforeRemoveRow', function(index, amount) {\r\n      // [table_name, change_type, operation, direction, search_attribute]\r\n      if (pending_changes.incoming === true) {\r\n        pending_changes.incoming = false;\r\n      } else {\r\n        let temp = []\r\n        temp[0] = \"check_book3\";\r\n        temp[1] = \"layout_change\";\r\n        temp[2] = \"remove_r\";\r\n        temp[3] = null;\r\n        temp[4] = check_book3_display[index][0];\r\n        temp[5] = socket_id;\r\n        pending_changes.data.push(temp);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_r\", null, index, \"check_book3\"]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent3.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_c\", null, index, \"check_book3\"]);\r\n      }\r\n    });\r\n\r\n    // FIFTH COMPONENT REF ========================================================================================\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        try {\r\n          // call check_cell_change if original and new data differ\r\n          if (chn[0][2] !== chn[0][3] && (chn[0][3] === null || (chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") )) {\r\n            console.log(\"differ!\");\r\n            chn_copy = chn;\r\n            if (chn_copy[0][3] === null) {\r\n              chn_copy[0][3] = \"\";\r\n            }\r\n            change_detected = true;\r\n\r\n            // remove currently editing state\r\n            current_i = -1;\r\n            current_j = -1;\r\n            currently_editing = false;\r\n          }\r\n        }\r\n        catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.rowBelow\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"below\", index, \"allowance\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_r\", \"above\", index, \"allowance\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        if (source === \"ContextMenu.columnRight\") {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"right\", index, \"allowance\"]);\r\n        } else {\r\n          layout_changes.layout_changed = true;\r\n          layout_changes.changes.push([\"insert_c\", \"left\", index, \"allowance\"]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('beforeRemoveRow', function(index, amount) {\r\n      // [table_name, change_type, operation, direction, search_attribute]\r\n      if (pending_changes.incoming === true) {\r\n        pending_changes.incoming = false;\r\n      } else {\r\n        let temp = []\r\n        temp[0] = \"allowance\";\r\n        temp[1] = \"layout_change\";\r\n        temp[2] = \"remove_r\";\r\n        temp[3] = null;\r\n        temp[4] = allowance_display[index][0];\r\n        temp[5] = socket_id;\r\n        pending_changes.data.push(temp);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_r\", null, index, \"allowance\"]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent4.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      if (layout_changes.incoming === true) {\r\n        layout_changes.incoming = false;\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"remove_c\", null, index, \"allowance\"]);\r\n      }\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.disconnect();\r\n  }\r\n\r\n  toggleLoadErrorModal = () => {\r\n    this.setState({\r\n      isLoadErrorModelOpen: !this.state.isLoadErrorModelOpen\r\n    })\r\n  }\r\n\r\n  toggleCompleteConfirmModal = () => {\r\n    this.setState({\r\n      isCompleteConfirmationModalOpen: !this.state.isCompleteConfirmationModalOpen\r\n    })\r\n  }\r\n\r\n  toggleRestartModal = () => {\r\n    this.setState({\r\n      isRestartModalOpen: !this.state.isRestartModalOpen\r\n    })\r\n  }\r\n\r\n  toggleNameModal = () => {\r\n    this.setState({\r\n      isNameModalOpen: !this.state.isNameModalOpen\r\n    })\r\n  }\r\n\r\n  toggleNavbar = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed\r\n    })\r\n  }\r\n\r\n  toggleSelectionPrompt = () => {\r\n    this.setState({\r\n        isSelectPromptOpen: !this.state.isSelectPromptOpen\r\n    })\r\n  }\r\n\r\n  toggleInstructionModal = () => {\r\n      this.setState({\r\n          isInstructionOpen: !this.state.isInstructionOpen\r\n      })\r\n  }\r\n\r\n  handleScroll = (e) => {\r\n    const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\r\n    if (bottom) {\r\n      // this.display()\r\n    }\r\n    prev_scrolltop = e.target.scrollTop;\r\n  }\r\n\r\n  check_cell_change = () => {\r\n    if (change_detected) {\r\n\r\n      // get current chicago time\r\n      const date = new Date();\r\n      let curr_time = date.toLocaleString('en-US', { timeZone: 'America/Chicago' });\r\n\r\n      // extract features of the new value  [row, col, prev, new]\r\n      let feature = \"\";\r\n      let prev_value = chn_copy[0][2];\r\n      if (isNaN(chn_copy[0][3])) {\r\n        feature = \"STR\";\r\n      } else if (chn_copy[0][3].length === 0) {\r\n        feature = \"EMPTY\";\r\n      } else {\r\n        feature = \"DIGIT\";\r\n      }\r\n\r\n      // record user action\r\n      user_actions.push([this.state.name, \"edit_cell\", chn_copy[0][0], chn_copy[0][1], feature, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], curr_time]);\r\n      \r\n      pending_changes.user = this.state.user_name\r\n  \r\n      let temp = []; // [table_name, change_type, value, search_attribute, update_attribute]\r\n      let y_coord = parseInt(chn_copy[0][0]);\r\n      let x_coord = parseInt(chn_copy[0][1]);\r\n      let actual_value = chn_copy[0][3];\r\n      temp[0] = this.state.curr_table;\r\n      temp[1] = \"cell_change\";\r\n      temp[2] = actual_value;\r\n      \r\n      // find the correct attribute\r\n      if (this.state.curr_table === \"monthly_expense\") {\r\n        // check for insertion \r\n        let insertion = true;\r\n        for (var j = 0; j < monthly_expense_display[y_coord].length; j++) {\r\n          if (j === x_coord) {\r\n            if (prev_value === \"\") {\r\n              continue;\r\n            } else {\r\n              insertion = false;\r\n              break;\r\n            }\r\n          }\r\n          if (monthly_expense_display[y_coord][j] !== \"\") {\r\n            insertion = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (insertion) {  // [table_name, change_type, operation, value, search_attribute] for insert\r\n          temp[1] = \"layout_change\";\r\n          temp[2] = \"insert_r\";\r\n          temp[3] = actual_value;\r\n          temp[4] = monthly_expense_col_headers[x_coord];\r\n          temp[5] = socket_id;\r\n          temp[6] = y_coord;\r\n        } else {\r\n          // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          temp[3] = monthly_expense_col_headers[x_coord];\r\n          if (x_coord === 0) {\r\n            temp[4] = prev_value;\r\n          } else {\r\n            temp[4] = monthly_expense_display[y_coord][0];\r\n          }\r\n          \r\n          if (x_coord === 1) {\r\n            temp[5] = prev_value;\r\n          } else {\r\n            temp[5] = monthly_expense_display[y_coord][1];\r\n          }\r\n          \r\n          temp[6] = y_coord;\r\n          temp[7] = x_coord;\r\n        }\r\n\r\n      } else if (this.state.curr_table === \"check_book\") {\r\n        // check for insertion \r\n        let insertion = true;\r\n        for (var j = 0; j < check_book_display[y_coord].length; j++) {\r\n          if (j === x_coord) {\r\n            if (prev_value === \"\") {\r\n              continue;\r\n            } else {\r\n              insertion = false;\r\n              break;\r\n            }\r\n          }\r\n          if (check_book_display[y_coord][j] !== \"\") {\r\n            insertion = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (insertion) {  // [table_name, change_type, operation, value, search_attribute] for insert\r\n          temp[1] = \"layout_change\";\r\n          temp[2] = \"insert_r\";\r\n          temp[3] = actual_value;\r\n          temp[4] = check_book_col_headers[x_coord];\r\n          temp[5] = socket_id;\r\n          temp[6] = y_coord;\r\n        } else {\r\n          // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          temp[3] = check_book_col_headers[x_coord];\r\n\r\n          if (x_coord === 0) {\r\n            temp[4] = prev_value;\r\n          } else {\r\n            temp[4] = check_book_display[y_coord][0];\r\n          }\r\n          \r\n          if (x_coord === 1) {\r\n            temp[5] = prev_value;\r\n          } else {\r\n            temp[5] = check_book_display[y_coord][1];\r\n          }\r\n          \r\n          temp[6] = y_coord;\r\n          temp[7] = x_coord;\r\n        }\r\n\r\n      } else if (this.state.curr_table === \"check_book2\") {\r\n        // check for insertion \r\n        let insertion = true;\r\n        for (var j = 0; j < check_book2_display[y_coord].length; j++) {\r\n          if (j === x_coord) {\r\n            if (prev_value === \"\") {\r\n              continue;\r\n            } else {\r\n              insertion = false;\r\n              break;\r\n            }\r\n          }\r\n          if (check_book2_display[y_coord][j] !== \"\") {\r\n            insertion = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (insertion) {  // [table_name, change_type, operation, value, search_attribute] for insert\r\n          temp[1] = \"layout_change\";\r\n          temp[2] = \"insert_r\";\r\n          temp[3] = actual_value;\r\n          temp[4] = check_book2_col_headers[x_coord];\r\n          temp[5] = socket_id;\r\n          temp[6] = y_coord;\r\n        } else {\r\n          // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          temp[3] = check_book2_col_headers[x_coord];\r\n\r\n          if (x_coord === 0) {\r\n            temp[4] = prev_value;\r\n          } else {\r\n            temp[4] = check_book2_display[y_coord][0];\r\n          }\r\n          \r\n          if (x_coord === 1) {\r\n            temp[5] = prev_value;\r\n          } else {\r\n            temp[5] = check_book2_display[y_coord][1];\r\n          }\r\n          \r\n          temp[6] = y_coord;\r\n          temp[7] = x_coord;\r\n        }\r\n\r\n      } else if (this.state.curr_table === \"check_book3\") {\r\n        // check for insertion \r\n        let insertion = true;\r\n        for (var j = 0; j < check_book3_display[y_coord].length; j++) {\r\n          if (j === x_coord) {\r\n            if (prev_value === \"\") {\r\n              continue;\r\n            } else {\r\n              insertion = false;\r\n              break;\r\n            }\r\n          }\r\n          if (check_book3_display[y_coord][j] !== \"\") {\r\n            insertion = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (insertion) {  // [table_name, change_type, operation, value, search_attribute] for insert\r\n          temp[1] = \"layout_change\";\r\n          temp[2] = \"insert_r\";\r\n          temp[3] = actual_value;\r\n          temp[4] = check_book3_col_headers[x_coord];\r\n          temp[5] = socket_id;\r\n          temp[6] = y_coord;\r\n        } else {\r\n          // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          temp[3] = check_book3_col_headers[x_coord];\r\n          if (x_coord === 0) {\r\n            temp[4] = prev_value;\r\n          } else {\r\n            temp[4] = check_book3_display[y_coord][0];\r\n          }\r\n          temp[5] = null;\r\n          temp[6] = y_coord;\r\n          temp[7] = x_coord;\r\n        }\r\n\r\n      } else if (this.state.curr_table === \"allowance\") {\r\n        // check for insertion \r\n        let insertion = true;\r\n        for (var j = 0; j < allowance_display[y_coord].length; j++) {\r\n          if (j === x_coord) {\r\n            if (prev_value === \"\") {\r\n              continue;\r\n            } else {\r\n              insertion = false;\r\n              break;\r\n            }\r\n          }\r\n          if (allowance_display[y_coord][j] !== \"\") {\r\n            insertion = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (insertion) {  // [table_name, change_type, operation, value, search_attribute] for insert\r\n          temp[1] = \"layout_change\";\r\n          temp[2] = \"insert_r\";\r\n          temp[3] = actual_value;\r\n          temp[4] = allowance_col_headers[x_coord];\r\n          temp[5] = socket_id;\r\n          temp[6] = y_coord;\r\n        } else {\r\n          // [table_name, change_type, update_value, update_attribute, search_attribute1, search_attribute2, y_coord, x_coord] for cell changes\r\n          temp[3] = allowance_col_headers[x_coord];\r\n          if (x_coord === 0) {\r\n            temp[4] = prev_value;\r\n          } else {\r\n            temp[4] = allowance_display[y_coord][0];\r\n          }\r\n          temp[5] = null;\r\n          temp[6] = y_coord;\r\n          temp[7] = x_coord;\r\n        }\r\n\r\n      }\r\n\r\n      pending_changes.data.push(temp);\r\n      change_detected = false;\r\n    } else {\r\n      console.log(\"no changed detected\")\r\n    }\r\n  }\r\n\r\n  start_transaction = () => {\r\n    pending_changes.data = []\r\n    this.setState({\r\n      transaction_mode: true\r\n    })\r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.end_transaction} >End Transaction</Button> \r\n    setTimeout(() => {\r\n      user_actions.push([this.state.name, \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", ]);\r\n    }, 200);\r\n  }\r\n\r\n  end_transaction = () => {\r\n    this.setState({\r\n      transaction_mode: false\r\n    });\r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.start_transaction} >Start Transaction</Button>\r\n\r\n    // signal backend to release locks | Removed for the first user study\r\n    // this.socket.emit('FINISH_TRANSACTION');\r\n\r\n    // send updates to socket\r\n    setTimeout(() => {\r\n      // remove data noise by removing the invisible click before end transaction\r\n      if (user_actions.length >= 3) {\r\n        if (user_actions[user_actions.length - 1][1] === \"click\" && user_actions[user_actions.length - 2][1] === \"edit_cell\" && user_actions[user_actions.length - 3][1] === \"keyPress_enter\") {\r\n          user_actions.pop();\r\n        }\r\n      }\r\n      user_actions.push([this.state.name, \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\"]);\r\n      this.commit_transaction();\r\n\r\n      // send updates to the database\r\n      const requestOptions = {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({pending_changes})\r\n      };\r\n      // fetch('https://spreadsheetactions.herokuapp.com/academic/update', requestOptions,  {mode: 'no-cors'})\r\n    }, 500);\r\n  }\r\n\r\n  commit_transaction = () => {\r\n    // send cell changes to the socket\r\n    if (pending_changes.data.length !== 0) {\r\n      this.socket.emit('SEND_MESSAGE', pending_changes);\r\n    }\r\n\r\n    // send layout changes to the socket\r\n    if (layout_changes.changes.length !== 0) {\r\n\r\n      // reset layout changes\r\n      layout_changes.changes.length = 0;\r\n      layout_changes.start_idx = 0;\r\n    }\r\n  }\r\n\r\n  track_action = (e, action_type) => {\r\n\r\n    // get current chicago time\r\n    const date = new Date();\r\n    let curr_time = date.toLocaleString('en-US', { timeZone: 'America/Chicago' });\r\n\r\n    // check and update possible spreadsheet layout change\r\n    if (layout_changes.layout_changed) { \r\n\r\n      // add in all layout changes\r\n      for (var i = layout_changes.start_idx; i < layout_changes.changes.length; i++) {\r\n        let layout_change_type = layout_changes.changes[i][0];\r\n        let layout_change_direction = layout_changes.changes[i][1];\r\n        let change_index = layout_changes.changes[i][2];\r\n        user_actions.push([this.state.name, layout_change_type, change_index, layout_change_direction, null, this.state.curr_table, null, null, curr_time]); \r\n        layout_changes.start_idx++;\r\n      }\r\n\r\n      // clear up current layout_changes recorder\r\n      layout_changes.layout_changed = false;\r\n    }\r\n\r\n    // // handle scroll actions\r\n    // if (action_type === \"scroll\") {\r\n\r\n    //   let scroll_diff = prev_scrolltop - e.target.scrollTop;\r\n    //   let action_length = user_actions.length;\r\n\r\n    //   // don't hace scroll_diff === 0 because each scroll on mouse will result in two identical function calls\r\n    //   if (scroll_diff > 0) {\r\n        \r\n    //     // check if previous is a large up scroll. If so, do nothing\r\n    //     if (action_length >= 1 && user_actions[action_length - 1][1] === \"up_scroll_l\") {\r\n    //       // deliberately do nothing here\r\n    //     }\r\n\r\n    //     // check for combining 6 small up scrolls\r\n    //     else if (action_length >= SCROLL_SIZE) {\r\n    //       let combine = true;\r\n    //       for (var i = 0; i < SCROLL_SIZE; i++) {\r\n    //           if (user_actions[action_length - 1 - i][1] !== \"up_scroll_s\") {\r\n    //             combine = false;\r\n    //             break;\r\n    //           }\r\n    //       }\r\n\r\n    //       if (combine) {\r\n    //         for (var i = 0; i < SCROLL_SIZE; i++) {\r\n    //             user_actions.pop();\r\n    //         }\r\n    //         user_actions.push([this.state.name, \"up_scroll_l\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //       }\r\n\r\n    //       else {\r\n    //         user_actions.push([this.state.name, \"up_scroll_s\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //       }\r\n    //     }\r\n\r\n    //     else {\r\n    //       user_actions.push([this.state.name, \"up_scroll_s\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //     }\r\n\r\n    //   } else if (scroll_diff < 0) {\r\n\r\n    //     // check if previous is a large down scroll. If so, do nothing\r\n    //     if (action_length >= 1 && user_actions[action_length - 1][1] === \"down_scroll_l\") {\r\n    //         // deliberately do nothing here\r\n    //     }\r\n\r\n    //     // check for combining 6 small scrolls\r\n    //     else if (action_length >= SCROLL_SIZE) {\r\n    //       let combine = true;\r\n    //       for (var i = 0; i < SCROLL_SIZE; i++) {\r\n    //           if (user_actions[action_length - 1 - i][1] !== \"down_scroll_s\") {\r\n    //             combine = false;\r\n    //             break;\r\n    //           }\r\n    //       }\r\n          \r\n    //       if (combine) {\r\n    //         for (var i = 0; i < SCROLL_SIZE; i++) {\r\n    //             user_actions.pop();\r\n    //         }\r\n    //         user_actions.push([this.state.name, \"down_scroll_l\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //       }\r\n\r\n    //       else {\r\n    //         user_actions.push([this.state.name, \"down_scroll_s\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //       }\r\n    //     } \r\n\r\n    //     else {\r\n    //       user_actions.push([this.state.name, \"down_scroll_s\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    //     }\r\n    //   }\r\n    //   this.handleScroll(e);\r\n    // }\r\n\r\n    // calculate click action\r\n    else if (action_type === \"click\") {\r\n\r\n      if (currently_editing) {\r\n        \r\n        // select a row\r\n        if (select_j < 0) {\r\n          user_actions.push([this.state.name, \"select_r\", select_i, null, null, this.state.curr_table, null, null, curr_time]);\r\n        }\r\n\r\n        // select a column\r\n        else if (select_i < 0) {\r\n          user_actions.push([this.state.name, \"select_c\", select_j, null, null, this.state.curr_table, null, null, curr_time]);\r\n        }\r\n        \r\n        // select a cell\r\n        else {\r\n          user_actions.push([this.state.name, action_type, select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n        }\r\n        currently_editing = false;\r\n      }\r\n      this.check_cell_change();\r\n    }\r\n\r\n    // calculate kepress action\r\n    else if (action_type === \"key_press\") {\r\n\r\n      if (currently_editing) {\r\n        console.log(\"currently editing\");\r\n         // left arrow\r\n        if (e.keyCode === 37) {\r\n          user_actions.push([this.state.name, \"left_arrow\", select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n        }\r\n\r\n        // up arrow\r\n        else if (e.keyCode === 38) {\r\n          user_actions.push([this.state.name, \"up_arrow\", select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n        }\r\n\r\n        // right arrow\r\n        else if (e.keyCode === 39) {\r\n          user_actions.push([this.state.name, \"right_arrow\", select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n        }\r\n\r\n        // down arrow\r\n        else if (e.keyCode === 40) {\r\n          user_actions.push([this.state.name, \"down_arrow\", select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n        }\r\n      }\r\n\r\n      if (change_detected) {\r\n        // handle enter press\r\n        if (e.key === \"Enter\") {\r\n          user_actions.push([this.state.name, \"keyPress_enter\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], curr_time]);\r\n        }\r\n\r\n        // handle tab press\r\n        else if (e.key === \"Tab\") {\r\n          user_actions.push([this.state.name, \"keyPress_tab\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], curr_time]);\r\n        }\r\n\r\n        // all other press \r\n        else {\r\n          user_actions.push([this.state.name, \"keyPress\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], curr_time]);\r\n        }\r\n      }\r\n      this.check_cell_change();\r\n    }\r\n    console.log(user_actions);\r\n  }\r\n\r\n  store_training_data = () => {\r\n    // get current chicago time\r\n    const date = new Date();\r\n    let curr_time = date.toLocaleString('en-US', { timeZone: 'America/Chicago' });\r\n\r\n    user_actions.push([this.state.name, \"END_TRAINING_DATA\", null, null, null, this.state.curr_table, null, null, curr_time]);\r\n    let action_package = {\r\n      user_actions: user_actions\r\n    }\r\n    //POST req here\r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({action_package})\r\n    };\r\n    fetch('https://spreadsheetactions.herokuapp.com/training/send-training-data/financing', requestOptions);\r\n\r\n    // bring the comfirmation modal up\r\n    this.toggleCompleteConfirmModal();\r\n  }\r\n\r\n  toggle = (tab) => {\r\n    if (this.state.activeTab !== tab) {\r\n        this.setState({ activeTab: tab });\r\n    }\r\n    if (tab === \"1\") {  \r\n      this.setState({\r\n        curr_table: \"monthly_expense\"\r\n      })\r\n      col_headers = monthly_expense_col_headers;\r\n\r\n    } else if (tab === \"2\") {\r\n      this.setState({\r\n        curr_table: \"check_book\"\r\n      })\r\n      col_headers = check_book_col_headers;\r\n    } else if (tab === \"3\") {\r\n      this.setState({\r\n        curr_table: \"check_book2\"\r\n      })\r\n      col_headers = check_book2_col_headers;\r\n    } else if (tab === \"4\") {\r\n      this.setState({\r\n        curr_table: \"check_book3\"\r\n      })\r\n      col_headers = check_book3_col_headers;\r\n    } else if (tab === \"5\") {\r\n      this.setState({\r\n        curr_table: \"allowance\"\r\n      })\r\n      col_headers = allowance_col_headers;\r\n    } \r\n  }\r\n\r\n  load_tables = (e) => {\r\n    e.preventDefault();\r\n    if (table_loaded) {\r\n      this.toggleInstructionModal();\r\n    } else {\r\n      table_loaded = true;\r\n      utils.load_simulation_v2(1, \"monthly_expense\", monthly_expense_display, load_error, monthly_expense_col_headers);\r\n      utils.load_simulation_v2(1, \"check_book\", check_book_display, load_error, check_book_col_headers);\r\n      utils.load_simulation_v2(1, \"check_book2\", check_book2_display, load_error, check_book2_col_headers);\r\n      utils.load_simulation_v2(1, \"check_book3\", check_book3_display, load_error, check_book3_col_headers);\r\n      utils.load_simulation_v2(1, \"allowance\", allowance_display, load_error, allowance_col_headers);\r\n      setTimeout(() => {\r\n          monthly_expense_display = [monthly_expense_col_headers].concat(monthly_expense_display);\r\n          check_book_display = [check_book_col_headers].concat(check_book_display);\r\n          check_book2_display = [check_book2_col_headers].concat(check_book2_display);\r\n          check_book3_display = [check_book3_col_headers].concat(check_book3_display);\r\n          allowance_display = [allowance_col_headers].concat(allowance_display);\r\n          this.setState({\r\n            isInstructionOpen: false\r\n          })\r\n      }, 3000);\r\n      col_headers = monthly_expense_col_headers;\r\n      this.setState({\r\n        isNameModalOpen: true\r\n      })\r\n    }\r\n  }\r\n\r\n  reload_tables = () => {\r\n    table_loaded = true;\r\n    utils.load_simulation_v2(1, \"monthly_expense\", monthly_expense_display, load_error, monthly_expense_col_headers);\r\n    utils.load_simulation_v2(1, \"check_book\", check_book_display, load_error, check_book_col_headers);\r\n    utils.load_simulation_v2(1, \"check_book2\", check_book_display, load_error, check_book_col_headers);\r\n    utils.load_simulation_v2(1, \"check_book3\", check_book_display, load_error, check_book_col_headers);\r\n    utils.load_simulation_v2(1, \"allowance\", allowance_display, load_error, allowance_col_headers);\r\n    setTimeout(() => {\r\n        monthly_expense_display = [monthly_expense_col_headers].concat(monthly_expense_display);\r\n        check_book_display = [check_book_col_headers].concat(check_book_display);\r\n        check_book2_display = [check_book2_col_headers].concat(check_book2_display);\r\n        check_book3_display = [check_book3_col_headers].concat(check_book3_display);\r\n        allowance_display = [allowance_col_headers].concat(allowance_display);\r\n    }, 3000);\r\n    col_headers = monthly_expense_col_headers;\r\n  }\r\n\r\n  onNameSubmit = (e) => {\r\n    this.setState({\r\n        [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  submitName = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"state name is: \", this.state.name);\r\n\r\n    let name_package = {\r\n      user_name: this.state.name,\r\n      simulation: \"financing\"\r\n    }\r\n    this.socket.emit('SEND_USERNAME', name_package);\r\n    this.toggleNameModal();\r\n\r\n    // handle load error that happens the FIRST time loading the table\r\n    if (load_error[0][0] === 1) {\r\n      this.setState({\r\n        isLoadErrorModelOpen: true\r\n      });\r\n    }\r\n  }\r\n\r\n  restart = () => {\r\n    // reset all display\r\n    monthly_expense_display = [];\r\n    check_book_display = [];\r\n    check_book2_display = [];\r\n    check_book3_display = [];\r\n    allowance_display = [];\r\n\r\n    // reset all col headers\r\n    monthly_expense_col_headers = [];\r\n    check_book_col_headers = [];\r\n    check_book2_col_headers = [];\r\n    check_book3_col_headers = [];\r\n    allowance_col_headers = [];\r\n\r\n    // reset load error\r\n    load_error[0][0] = 0;\r\n\r\n    // reload all tables\r\n    this.reload_tables();\r\n\r\n    // clear recorded actions\r\n    user_actions = [];\r\n\r\n    // set tab\r\n    this.setState({\r\n      activeTab: '1'\r\n    })\r\n    this.toggle('1');\r\n\r\n    // open restart confirmation\r\n    this.setState({\r\n      isRestartModalOpen: true\r\n    })\r\n  }\r\n\r\n  close_restart_comfirmation = () => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        isRestartModalOpen: false\r\n      });\r\n\r\n      // handle load error that happens during restart\r\n      if (load_error[0][0] === 1) {\r\n        this.setState({\r\n          isLoadErrorModelOpen: true\r\n        });\r\n      }\r\n    }, 2000);\r\n  }\r\n\r\n  close_confirmation = () => {\r\n    user_actions = []\r\n    this.toggleCompleteConfirmModal();\r\n  }\r\n\r\n  refresh = () => {\r\n    console.log(monthly_expense_display);\r\n    console.log(check_book_display);\r\n    console.log(check_book2_display);\r\n    console.log(check_book3_display);\r\n    console.log(allowance_display);\r\n    this.setState({\r\n      refresh: !this.state.refresh\r\n    });\r\n  }\r\n\r\n  record_read_cell = () => {\r\n\r\n    // get current chicago time\r\n    const date = new Date();\r\n    let curr_time = date.toLocaleString('en-US', { timeZone: 'America/Chicago' });\r\n\r\n    // find the correct table\r\n    let table = \"\";\r\n    if (this.state.curr_table === \"monthly_expense\") {\r\n      table = monthly_expense_display;\r\n    } else if (this.state.curr_table === \"check_book\") {\r\n      table = check_book_display;\r\n    } else if (this.state.curr_table === \"check_book2\") {\r\n      table = check_book2_display;\r\n    } else if (this.state.curr_table === \"check_book_3\") {\r\n      table = check_book3_display;\r\n    } else if (this.state.curr_table === \"allowance\") {\r\n      table = allowance_display;\r\n    } \r\n\r\n    // extract features of the new value  [row, col, prev, new]\r\n    let feature = \"EMPTY\";\r\n    if (table[select_i][select_j] !== null && table[select_i][select_j].length !== 0 && isNaN(table[select_i][select_j])) {\r\n      feature = \"STR\";\r\n    } else if (table[select_i][select_j] !== null && table[select_i][select_j].length !== 0 && !isNaN(table[select_i][select_j])) {\r\n      feature = \"DIGIT\";\r\n    }\r\n\r\n    if (user_actions.length !== 0) {\r\n      let prev_action = user_actions[user_actions.length - 1];\r\n      if (prev_action[1] == \"READ\" && prev_action[2] == select_i && prev_action[3] == select_j) {\r\n        // do nothing\r\n      } else {\r\n        user_actions.push([this.state.name, \"READ\", select_i, select_j, feature, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n      }\r\n\r\n    } else {\r\n      user_actions.push([this.state.name, \"READ\", select_i, select_j, feature, this.state.curr_table, select_i + 1, col_headers[select_j], curr_time]);\r\n    }\r\n  }\r\n\r\n  indicate_error = () => {\r\n    user_actions.push([this.state.name, \"ERR\", \"ERR\", \"ERR\", \"ERR\", \"ERR\", \"ERR\", \"ERR\", \"ERR\"]);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div onClick={e => this.track_action(e, \"click\")} onKeyUp={e => this.track_action(e, \"key_press\")} className=\"App\">\r\n        <script src=\"node_modules/handsontable/dist/handsontable.full.min.js\"></script>\r\n        <link href=\"node_modules/handsontable/dist/handsontable.full.min.css\" rel=\"stylesheet\" media=\"screen\"></link>\r\n         <Jumbotron className='logo-jumbo'>\r\n          </Jumbotron >\r\n          <div>\r\n            <Jumbotron >\r\n                  <h1 className=\"display-3\">Hi {this.state.name}, welcome to Financing Simulation!</h1>\r\n                  <p className=\"lead\">This is a simple web interface that allows you to upload spreadsheets and retrieve data.</p>\r\n                  <hr className=\"my-2\" />\r\n                  {this.state.user_text_block}\r\n                  <p className=\"lead\">\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    {transaction_button}\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.store_training_data} >Complete Simulation</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.restart} >Restart Simulation</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleInstructionModal} >Instruction</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.record_read_cell} >Read Cell</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.indicate_error} >Alert</Button>\r\n                  </p>\r\n                  {this.state.edit_message}\r\n\r\n                  <Modal size='lg' isOpen={this.state.isInstructionOpen} >\r\n                    <ModalBody>\r\n                        <h2>Welcome</h2>\r\n                        Welcome to Academic Simulation! This instruction can be accessed at any time by clicking the \"Instruction\" button on this webpage. \r\n                        Under this simulation, there are three tables: a \"Monthly Expenses\" table, a \"Monthly Income\" table, and a \"Transaction Log\" table. This simulation has only one part \r\n                        but there are two tasks to complete within this part. \r\n                        <br/>\r\n                        <h5>Note: </h5>\r\n                        When you first enter this simulation, please check if all tables are loaded. If some tables only have headers loaded but no content, press the refresh button.   \r\n                        <hr className=\"my-2\" />\r\n                        \r\n                        <p className=\"margin-one\">\r\n                        <h2>Task 1</h2>\r\n                        For task 1, you need to go through the expenses and incomes for a 6-month preiod described in the \"Story\" section in the introduction document, and for each one, log it into \r\n                        the \"Transaction Log\" table. Inside the Transaction Log table, the ID column is the feature that differentiates each transaction, and its your choice to fill in whatever \r\n                        id system you want (E.g. one, two,  or 001, 002), as long as it is logical. The date column corresponds to the date that an expense or income occurs. The Transaction \r\n                        column is a description of the expense or income, which you can write in your own words. For the Withdraw and Deposit columns, if the event is an expense, you should \r\n                        write the monetary amount to the Withdraw column, and leave the Deposit plank; if the event is an income, you should write the monetary amount to the Deposit column \r\n                        and leave the Withdraw blank. For each entry into the Transaction Log, you also need to manually calculate the remaining balance in the Balance column. A deposit \r\n                        increases the balance by the deposit amount, and a withdraw decreases the balance by the withdraw amount. You will assume that the original balance is $2,000. Further details \r\n                        of the instruction are also included in that document we sent you via email. If you did not received the document, please contact ninghan2@illinois.edu.\r\n                        <br/>\r\n                        </p>\r\n                        <hr className=\"my-2\" />\r\n\r\n                        <p className=\"margin-one\">\r\n                        <h2>Task 2</h2>\r\n                        As you are going through each expense and income from the \"Story\" section from the introduction document, you also need to update the \"Monthly Expenses\" table and \"Monthly Income\" table \r\n                        accordingly. The general rule is that if the event is an expense, you should reflect it in the Monthly Expenses table, and if the event is an income, you should reflect \r\n                        it in the Monthly Income table. For both \"Montly Expenses\" and \"Monthly Income\" table, the Category column indicates the category of each expense or income. A category could \r\n                        contain/summarize multiple expenses/incomes, or just one expense/income. For example, in the Monthly Expenses table, you could have a Restaurant category, and the expense \r\n                        under this category should be the sum of all expenses on restaurants within that month. You could also have a Rent category, which only contains one expense on rent per \r\n                        month since we pay rent once a month. You could also come up with categories that may only have values on certain months and have no values on other months. For example, \r\n                        if you have a Clothing category, and you spent a total of $500 on clothing on Jan. and $0 on Feb., then this category should have no value on Feb. How to name and use \r\n                        the categories of expenses and incomes are your choice but should be logical. All the other columns are self-explanatory. Further details \r\n                        of the instruction are also included in that document we sent you via email. If you did not received the document, please contact ninghan2@illinois.edu.\r\n                        <br/>\r\n                        </p>\r\n                        <hr className=\"my-2\" />\r\n\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button size='lg' className='display-button' color=\"info\" onClick={this.load_tables}>Got it!</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isNameModalOpen} toggle={this.toggleNameModal}>\r\n                    <ModalHeader toggle={this.toggleNameModal}>Please Enter Your Full Name</ModalHeader>\r\n                    <ModalBody>\r\n                      <Form onSubmit={this.submitName}>\r\n                        <FormGroup>\r\n                          <Label for=\"user_name\">Enter Full Name</Label>\r\n                          <Input type=\"text\" name=\"name\" id=\"name\" onChange={e => this.onNameSubmit(e)} />\r\n                        </FormGroup>\r\n                        <Button size='lg' color=\"primary\" className='single_search_submit' type=\"submit\" >Confirm</Button> {' '}\r\n                      </Form>\r\n                    </ModalBody>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isRestartModalOpen} toggle={this.toggleRestartModal}>\r\n                    <ModalHeader toggle={this.toggleRestartModal}>Restart Confirmation</ModalHeader>\r\n                    <ModalBody>\r\n                      Your simulation has been restarted. All the changes that haven't been committed yet are clearned. \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                      <Button size='lg' className='display-button' color=\"info\" onClick={this.close_restart_comfirmation}>Got It</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isCompleteConfirmationModalOpen} toggle={this.toggleCompleteConfirmModal}>\r\n                    <ModalHeader toggle={this.toggleCompleteConfirmModal}>Complete Confirmation</ModalHeader>\r\n                    <ModalBody>\r\n                      The simulation has been completed and submitted! You can simply close this webpage. If you submitted by mistake or \r\n                      need to report an error, please contact ninghan2@illinois.edu \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                      <Button size='lg' className='display-button' color=\"info\" onClick={this.close_confirmation}>Got It</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isLoadErrorModelOpen} toggle={this.toggleLoadErrorModal}>\r\n                    <ModalHeader toggle={this.toggleLoadErrorModal}>Load Error!</ModalHeader>\r\n                    <ModalBody>\r\n                      Something went wrong while loading your tables. Please press the \"Restart\" button on your screen to reload the tables after you close this message. If the error keeps coming up, \r\n                      contact ninghan2@illinois.edu \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                      <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleLoadErrorModal}>Close Message</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n                  \r\n                        \r\n            </Jumbotron>\r\n        </div>\r\n        {/* <hr /> */}\r\n\r\n        <Nav tabs>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '1' })}\r\n                    onClick={() => { this.toggle('1'); }}>\r\n                    Monthly Expenses\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '2' })}\r\n                    onClick={() => { this.toggle('2'); }}>\r\n                    Parent Check Book\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '3' })}\r\n                    onClick={() => { this.toggle('3'); }}>\r\n                    Child 1 Check Book\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '4' })}\r\n                    onClick={() => { this.toggle('4'); }}>\r\n                    Child 2 Check Book\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '5' })}\r\n                    onClick={() => { this.toggle('5'); }}>\r\n                    Allowance\r\n                </NavLink>\r\n            </NavItem>\r\n        </Nav>\r\n        <TabContent activeTab={this.state.activeTab}>\r\n            <TabPane tabId=\"1\">\r\n                <h4>\r\n                    Monthly Expenses Table\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"1\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={monthly_expense_display} ref={this.hotTableComponent} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"2\">\r\n                <h4>\r\n                    Parent Check Book\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"2\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={check_book_display} ref={this.hotTableComponent1} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"3\">\r\n                <h4>\r\n                    Child 1 Check Book\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"3\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={check_book2_display} ref={this.hotTableComponent2} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"4\">\r\n                <h4>\r\n                    Child 2 Check Book\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"4\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={check_book3_display} ref={this.hotTableComponent3} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"5\">\r\n                <h4>\r\n                    Allowance\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"5\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={allowance_display} ref={this.hotTableComponent4} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n        </TabContent>\r\n          \r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nexport default Financing;\r\n",["179","180"],"C:\\Users\\IvanZzz\\source\\repos\\experimentapp\\src\\components\\Management.js",["181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225"],"import React, { Component, useState } from 'react';\r\nimport ReactDOM from \"react-dom\"\r\nimport { HotTable } from '@handsontable/react';\r\n// import Handsontable from 'handsontable';\r\nimport 'handsontable/dist/handsontable.full.css';\r\nimport '../App.css';\r\nimport {\r\n  Collapse,\r\n  Navbar,\r\n  NavbarToggler,\r\n  NavbarBrand,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Jumbotron,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  Button,\r\n  Table, Modal, ModalHeader, ModalFooter, ModalBody, Form, FormGroup, Label, Input, ListGroup, Card, CardTitle, CardText, TabContent, TabPane, ButtonDropdown, Dropdown, DropdownToggle, DropdownMenu, DropdownItem\r\n} from 'reactstrap';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Link,\r\n  useHistory,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport classnames from 'classnames';\r\nimport io from \"socket.io-client\";\r\n\r\nconst Utils = require('../utils');\r\nlet utils = new Utils();\r\n\r\nlet schedule_v1_display = [];\r\nlet schedule_v2_display = [];\r\nlet progress_display = [];\r\nlet table_loaded = false;\r\n\r\nlet simulation_type = \"\";\r\n\r\n// A JSON object that keeps track of previous layout changes\r\nlet layout_changes = {\r\n  layout_changed: false,\r\n  changes: [] // 1st element: action;  2nd element: index\r\n}\r\n\r\nlet col_headers = []\r\nlet schedule_v1_col_headers = [];\r\nlet schedule_v2_col_headers = [];\r\nlet progress_col_headers = [];\r\n\r\nlet user_actions = []\r\nlet recorded_time = 0;\r\n\r\nlet SCROLL_SIZE = 5;\r\n\r\nlet data = [], dataMatrix = [], columns = [], buffer = [], buffer_copy = []\r\nlet PREFETCH_SIZE = 50\r\nlet noData = true\r\nlet ATT_NUM = 7\r\nlet prev_scrolltop = 0\r\nlet data_display = []\r\nlet chn_copy = []\r\nlet change_detected = false;\r\n\r\nlet current_fetch_index = 1 //initial pre-prefetch index\r\nlet num_attr = 0;\r\n\r\nlet current_i = -1;\r\nlet current_j = -1;\r\nlet currently_editing = false;\r\n\r\nlet conflict_i = -1;\r\nlet conflict_j = -1;\r\nlet incoming_value = \"\";\r\nlet conflict_message = \"\";\r\n\r\nlet select_i = -1; \r\nlet select_j = -1;\r\n\r\nlet transaction_button = \"\";\r\nlet apply_read_only_lock_button = \"\";\r\nlet display_dataset_button = \"\";\r\n\r\nlet socket_id = \"\";\r\n\r\nlet pending_changes = {\r\n  data:[], // 2d array to store difference: y, value, x, \r\n  try_message: \"SENT MESSAGE! SUCCESS!\", \r\n  user: \"\"\r\n}\r\n\r\nclass Management extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"hot\";\r\n    this.hotTableComponent = React.createRef();\r\n    this.hotTableComponent1 = React.createRef();\r\n    this.hotTableComponent2 = React.createRef();\r\n    this.state = {\r\n      collapsed: false,\r\n      items: Array.from({ length: 0 }),\r\n      hasMore: false,\r\n      load_from_buffer_to_matrix: false, \r\n\r\n      //retrieval display variables\r\n      hasMoreResult: false,\r\n      resultItems: Array.from({ length: 0 }), \r\n      load_result_from_buffer_to_matrix: false, \r\n\r\n      import_page_link: '/result', \r\n\r\n      data_original: [], \r\n      check_cell_update: false, \r\n\r\n      test_block: \"ORIGINAL MESSAGE\", \r\n      users:[], \r\n      user_text_block: \"\", \r\n\r\n      isSelectPromptOpen: true, \r\n      user_name: \"\", \r\n\r\n      edit_message: \"Last Edit: No modification yet\", \r\n      history: [], \r\n      isShowHistoryOpen: false, \r\n\r\n      transaction_mode: false, \r\n      isSharedLockRejectOpen: false,\r\n      isExclusiveLockRejectOpen: false, \r\n\r\n      isInstructionOpen: true,\r\n      activeTab: '1', \r\n\r\n      redirect_link: \"\", \r\n      isRedirectConfirmOpen: false, \r\n      redirect: false, \r\n\r\n      isRestartModalOpen: false, \r\n      isNameModalOpen: false, \r\n\r\n      isCompleteConfirmationModalOpen: false, \r\n      name: \"\", \r\n      curr_table: \"schedule_v1\"\r\n    }\r\n\r\n    // Socket io stuff =========================================================================================\r\n\r\n    this.socket = io('https://spreadsheetactions.herokuapp.com/');\r\n    // this.socket = io('localhost:3001');\r\n\r\n    this.socket.on('RECEIVE_ID', function(id){\r\n      change_id(id);\r\n    });\r\n\r\n    // update current list of online users when a new user joins\r\n    this.socket.on('ADD_NEW_USER', function(data) {\r\n      console.log(\"adding new user\");\r\n      addNewUser(data);\r\n    });\r\n\r\n    // update current list of online users when one user is disconnected\r\n    this.socket.on('CHANGE_CURRENT_USER', function(data) {\r\n      change_current_user(data);\r\n    });\r\n\r\n    // receive updates on spreadsheet from other users\r\n    this.socket.on('RECEIVE_MESSAGE', function(data){\r\n      addMessage(data);\r\n    });\r\n\r\n    // update the last edit message, as well as the entire edit history\r\n    this.socket.on('UPDATE_EDIT_MESSAGE', function(message_package) {\r\n      update_edit_message(message_package);\r\n    });\r\n    \r\n\r\n    const change_id = id => {\r\n      socket_id = id;\r\n    }\r\n\r\n    const addNewUser = data => {\r\n      this.setState({\r\n        history: data.history\r\n      })\r\n      change_current_user(data);\r\n    }\r\n\r\n    const change_current_user = data => {\r\n      if (data.simulation === \"management\") {\r\n        this.setState({\r\n          users: data.current_users\r\n        });\r\n        let new_user_text = \"Currently Online: \";\r\n        for (var i = 0; i < this.state.users.length; i++) {\r\n          if (i == this.state.users.length - 1) {\r\n            new_user_text += this.state.users[i]\r\n          } else {\r\n            new_user_text += this.state.users[i] + \", \"\r\n          }\r\n        }\r\n        this.setState({\r\n          user_text_block: new_user_text\r\n        });\r\n      }\r\n    }\r\n\r\n    const update_edit_message = message_package => {\r\n      this.setState({\r\n        edit_message: message_package.new_message, \r\n        history: message_package.history\r\n      })\r\n    }\r\n\r\n    const addMessage = data => {\r\n      console.log(\"the data in addMessage is: \", data);\r\n      let change_table = data.data\r\n      for (var x = 0; x < change_table.length; x++) {\r\n        // Extract data\r\n        let j = change_table[x][0] - 1   // 0 --> y_coord\r\n        let value = change_table[x][1] // 1 --> actual value\r\n        let i = change_table[x][2] - 1 // 2 --> x_coord\r\n        let table = change_table[x][3]; // table corresponds to this change  \r\n\r\n        // reflect each update to its corresponding table\r\n        if (table === \"schedule_v1\") {\r\n            schedule_v1_display[i][j] = value;\r\n        } else if (table === \"schedule_v2\") {\r\n            schedule_v2_display[i][j] = value;\r\n        } else if (table === \"progress_log\") {\r\n            progress_display[i][j] = value;\r\n        }\r\n      }\r\n  };\r\n\r\n    // Socket io stuff =========================================================================================\r\n\r\n    this.toggleSelectionPrompt = this.toggleSelectionPrompt.bind()\r\n    this.toggleNavbar = this.toggleNavbar.bind()\r\n    this.toggleInstructionModal = this.toggleInstructionModal.bind();\r\n    this.toggleRedirectConfirmModal = this.toggleRedirectConfirmModal.bind();\r\n    this.toggleNameModal = this.toggleNameModal.bind();\r\n    this.toggleRestartModal = this.toggleRestartModal.bind();\r\n    this.toggleCompleteConfirmModal = this.toggleCompleteConfirmModal.bind();\r\n  }\r\n\r\n  // fetch 50 rows of data into the buffer\r\n  async componentDidMount() {\r\n    recorded_time = Date.now() / 1000;\r\n\r\n    // display_dataset_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.display} >Display Dataset</Button> \r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.start_transaction} >Start Transaction</Button>\r\n\r\n    // FIRST REF =====================================================================================\r\n    this.hotTableComponent.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        // call check_cell_change if original and new data differ\r\n        if (chn[0][2] !== chn[0][3] && chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") {\r\n          console.log(\"differ!\");\r\n          chn_copy = chn;\r\n          change_detected = true;\r\n\r\n          // remove currently editing state\r\n          current_i = -1;\r\n          current_j = -1;\r\n          currently_editing = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.rowBelow\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"below\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"above\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.columnRight\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"right\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"left\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_r\", null, index]);\r\n    });\r\n\r\n    this.hotTableComponent.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_c\", null, index]);\r\n    });\r\n\r\n    // SECOND REF =====================================================================================\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        // call check_cell_change if original and new data differ\r\n        if (chn[0][2] !== chn[0][3] && chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") {\r\n          console.log(\"differ!\");\r\n          chn_copy = chn;\r\n          change_detected = true;\r\n\r\n          // remove currently editing state\r\n          current_i = -1;\r\n          current_j = -1;\r\n          currently_editing = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.rowBelow\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"below\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"above\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.columnRight\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"right\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"left\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_r\", null, index]);\r\n    });\r\n\r\n    this.hotTableComponent1.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_c\", null, index]);\r\n    });\r\n\r\n    // THIRD REF =====================================================================================\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterChange', function(chn, src) {\r\n      if (src === 'edit') {\r\n        console.log(chn);\r\n        \r\n        // call check_cell_change if original and new data differ\r\n        if (chn[0][2] !== chn[0][3] && chn[0][3].charAt(0) !== \"*\" && chn[0][3] !== \"-----\") {\r\n          console.log(\"differ!\");\r\n          chn_copy = chn;\r\n          change_detected = true;\r\n\r\n          // remove currently editing state\r\n          current_i = -1;\r\n          current_j = -1;\r\n          currently_editing = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterBeginEditing', function(row, col) {\r\n\r\n      // record the currently editing location and state. \r\n      current_i = row;\r\n      current_j = col;\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterSelection', function(row, column, row2, column2, preventScrolling, selectionLayerLevel) {\r\n\r\n      // record the currently editing location and state. \r\n      select_i = row;\r\n      select_j = column;\r\n      currently_editing = true;\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterCreateRow', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.rowBelow\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"below\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_r\", \"above\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterCreateCol', function(index, amount, source) {\r\n      console.log(\"insert index is: \", index);\r\n      if (source === \"ContextMenu.columnRight\") {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"right\", index]);\r\n      } else {\r\n        layout_changes.layout_changed = true;\r\n        layout_changes.changes.push([\"insert_c\", \"left\", index]);\r\n      }\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterRemoveRow', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_r\", null, index]);\r\n    });\r\n\r\n    this.hotTableComponent2.current.hotInstance.addHook('afterRemoveCol', function(index, amount, physicalRows, source) {\r\n      layout_changes.layout_changed = true;\r\n      layout_changes.changes.push([\"remove_c\", null, index]);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.disconnect();\r\n  }\r\n\r\n  toggleCompleteConfirmModal = () => {\r\n    this.setState({\r\n      isCompleteConfirmationModalOpen: !this.state.isCompleteConfirmationModalOpen\r\n    })\r\n  }\r\n\r\n  toggleRestartModal = () => {\r\n    this.setState({\r\n      isRestartModalOpen: !this.state.isRestartModalOpen\r\n    })\r\n  }\r\n\r\n  toggleNameModal = () => {\r\n    this.setState({\r\n      isNameModalOpen: !this.state.isNameModalOpen\r\n    })\r\n  }\r\n\r\n  toggleRedirectConfirmModal = () => {\r\n    this.setState({\r\n      isRedirectConfirmOpen: !this.state.isRedirectConfirmOpen\r\n    })\r\n  }\r\n\r\n  toggleNavbar = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed\r\n    })\r\n  }\r\n\r\n  toggleSelectionPrompt = () => {\r\n    this.setState({\r\n        isSelectPromptOpen: !this.state.isSelectPromptOpen\r\n    })\r\n  }\r\n\r\n  toggleInstructionModal = () => {\r\n      this.setState({\r\n          isInstructionOpen: !this.state.isInstructionOpen\r\n      })\r\n  }\r\n\r\n  display = () => {\r\n    display_dataset_button = \"\";\r\n    if (this.state.transaction_mode) {\r\n      transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.end_transaction} >End Transaction</Button> \r\n    } else {\r\n      transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.start_transaction} >Start Transaction</Button>\r\n    }\r\n    this.setState({\r\n      data_original: this.state.data_original.concat(buffer)\r\n    })\r\n\r\n    // fill in column headers and row headers\r\n    if (data_display.length === 0) {\r\n      data_display.push(col_headers);\r\n    }\r\n    data_display = data_display.concat(buffer_copy) \r\n    console.log(\"data display is: \", data_display);\r\n  }\r\n\r\n  handleScroll = (e) => {\r\n    const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\r\n    if (bottom) {\r\n      // this.display()\r\n    }\r\n    prev_scrolltop = e.target.scrollTop;\r\n  }\r\n\r\n  check_cell_change = () => {\r\n    if (change_detected) {\r\n\r\n      // find current state\r\n      let state = \"Y\"; //  Y means in a transaction\r\n      if (!this.state.transaction_mode) {\r\n        state = \"N\";\r\n      }\r\n\r\n      // extract features of the new value\r\n      let feature = \"\";\r\n      if (isNaN(chn_copy[0][3])) {\r\n        feature = \"STR\";\r\n      } else {\r\n        feature = \"DIGIT\";\r\n      }\r\n\r\n      // record user action\r\n      user_actions.push([this.state.name, \"edit_cell\", chn_copy[0][0], chn_copy[0][1], feature, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], state]);\r\n      \r\n      pending_changes.user = this.state.user_name\r\n  \r\n      let temp = [];\r\n      let y_coord = parseInt(chn_copy[0][0]) + 1;\r\n      let x_coord = parseInt(chn_copy[0][1]) + 1;\r\n      let actual_value = chn_copy[0][3];\r\n      temp[0] = x_coord;\r\n      temp[1] = actual_value;\r\n      temp[2] = y_coord;\r\n      temp[3] = this.state.curr_table;\r\n      pending_changes.data.push(temp);\r\n      change_detected = false;\r\n    } else {\r\n      console.log(\"no changed detected\")\r\n    }\r\n  }\r\n\r\n  start_transaction = () => {\r\n    pending_changes.data = []\r\n    this.setState({\r\n      transaction_mode: true\r\n    });\r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.end_transaction} >End Transaction</Button> \r\n    setTimeout(() => {\r\n      user_actions.push([\"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", \"START_TRANSACTION\", ]);\r\n    }, 200);\r\n  }\r\n\r\n  end_transaction = () => {\r\n    this.setState({\r\n      transaction_mode: false\r\n    });\r\n    transaction_button = <Button size='lg' className='display-button' color=\"primary\" onClick={this.start_transaction} >Start Transaction</Button>\r\n    setTimeout(() => {\r\n      user_actions.push([\"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\", \"END_TRANSACTION\"]);\r\n      this.commit_transaction();\r\n    }, 500);\r\n  }\r\n\r\n  commit_transaction = () => {\r\n    this.socket.emit('SEND_MESSAGE', pending_changes);\r\n  }\r\n\r\n  track_action = (e, action_type) => {\r\n\r\n    // find current state\r\n    let state = \"Y\"; //  Y means in a transaction\r\n    if (!this.state.transaction_mode) {\r\n      state = \"N\";\r\n    }\r\n\r\n    // calculate idle time and record idle action if necessary\r\n    let idle_duration = (Date.now() / 1000) - recorded_time;\r\n    recorded_time = (Date.now() / 1000);\r\n    if (idle_duration > 3) {\r\n\r\n      // check if we can merge two idle periods together\r\n      if (user_actions.length > 0 && user_actions[user_actions.length - 1][1] === \"idle\") {\r\n        let prev_idle_time = user_actions[user_actions.length - 1][2];\r\n        user_actions.pop();\r\n        user_actions.push([this.state.name, \"idle\", parseInt(idle_duration) + prev_idle_time, null, null, this.state.curr_table, null, null, state]);\r\n      } else {\r\n        user_actions.push([this.state.name, \"idle\", parseInt(idle_duration), null, null, this.state.curr_table, null, null, state]);\r\n      }\r\n    }\r\n\r\n    // check and update possible spreadsheet layout change\r\n    if (layout_changes.layout_changed) { \r\n      \r\n      // remove prev idle action\r\n      if (user_actions.length > 0 && user_actions[user_actions.length - 1][1] === \"idle\") {\r\n        user_actions.pop();\r\n      }\r\n\r\n      // add in all layout changes\r\n      for (var i = 0; i < layout_changes.changes.length; i++) {\r\n        let layout_change_type = layout_changes.changes[i][0];\r\n        let layout_change_direction = layout_changes.changes[i][1];\r\n        let change_index = layout_changes.changes[i][2];\r\n        user_actions.push([this.state.name, layout_change_type, change_index, layout_change_direction, null, this.state.curr_table, null, null, state]); \r\n      }\r\n\r\n      // clear up current layout_changes recorder\r\n      layout_changes.changes.length = 0;\r\n      layout_changes.layout_changed = false;\r\n    }\r\n\r\n    // handle scroll actions\r\n    if (action_type === \"scroll\") {\r\n\r\n      let scroll_diff = prev_scrolltop - e.target.scrollTop;\r\n      let action_length = user_actions.length;\r\n\r\n      // don't hace scroll_diff === 0 because each scroll on mouse will result in two identical function calls\r\n      if (scroll_diff > 0) {\r\n        \r\n        // check if previous is a large up scroll. If so, do nothing\r\n        if (action_length >= 1 && user_actions[action_length - 1][1] === \"up_scroll_l\") {\r\n          // deliberately do nothing here\r\n        }\r\n\r\n        // check for combining 6 small up scrolls\r\n        else if (action_length >= SCROLL_SIZE) {\r\n          let combine = true;\r\n          for (var i = 0; i < SCROLL_SIZE; i++) {\r\n              if (user_actions[action_length - 1 - i][1] !== \"up_scroll_s\") {\r\n                combine = false;\r\n                break;\r\n              }\r\n          }\r\n\r\n          if (combine) {\r\n            for (var i = 0; i < SCROLL_SIZE; i++) {\r\n                user_actions.pop();\r\n            }\r\n            user_actions.push([this.state.name, \"up_scroll_l\", null, null, null, this.state.curr_table, null, null, state]);\r\n          }\r\n\r\n          else {\r\n            user_actions.push([this.state.name, \"up_scroll_s\", null, null, null, this.state.curr_table, null, null, state]);\r\n          }\r\n        }\r\n\r\n        else {\r\n          user_actions.push([this.state.name, \"up_scroll_s\", null, null, null, this.state.curr_table, null, null, state]);\r\n        }\r\n\r\n      } else if (scroll_diff < 0) {\r\n\r\n        // check if previous is a large down scroll. If so, do nothing\r\n        if (action_length >= 1 && user_actions[action_length - 1][1] === \"down_scroll_l\") {\r\n            // deliberately do nothing here\r\n        }\r\n\r\n        // check for combining 6 small scrolls\r\n        else if (action_length >= SCROLL_SIZE) {\r\n          let combine = true;\r\n          for (var i = 0; i < SCROLL_SIZE; i++) {\r\n              if (user_actions[action_length - 1 - i][1] !== \"down_scroll_s\") {\r\n                combine = false;\r\n                break;\r\n              }\r\n          }\r\n          \r\n          if (combine) {\r\n            for (var i = 0; i < SCROLL_SIZE; i++) {\r\n                user_actions.pop();\r\n            }\r\n            user_actions.push([this.state.name, \"down_scroll_l\", null, null, null, this.state.curr_table, null, null, state]);\r\n          }\r\n\r\n          else {\r\n            user_actions.push([this.state.name, \"down_scroll_s\", null, null, null, this.state.curr_table, null, null, state]);\r\n          }\r\n        } \r\n\r\n        else {\r\n          user_actions.push([this.state.name, \"down_scroll_s\", null, null, null, this.state.curr_table, null, null, state]);\r\n        }\r\n      }\r\n      this.handleScroll(e);\r\n    }\r\n\r\n    // calculate click action\r\n    else if (action_type === \"click\") {\r\n\r\n      if (currently_editing) {\r\n        \r\n        // select a row\r\n        if (select_j < 0) {\r\n          user_actions.push([this.state.name, \"select_r\", select_i, null, null, this.state.curr_table, null, null, state]);\r\n        }\r\n\r\n        // select a column\r\n        else if (select_i < 0) {\r\n          user_actions.push([this.state.name, \"select_c\", select_j, null, null, this.state.curr_table, null, null, state]);\r\n        }\r\n        \r\n        // select a cell\r\n        else {\r\n          user_actions.push([this.state.name, action_type, select_i, select_j, null, this.state.curr_table, select_i + 1, col_headers[select_j], state]);\r\n        }\r\n        currently_editing = false;\r\n      }\r\n      this.check_cell_change();\r\n    }\r\n\r\n    // calculate kepress action\r\n    else if (action_type === \"key_press\") {\r\n\r\n      if (change_detected) {\r\n        // handle enter press\r\n        if (e.key === \"Enter\") {\r\n          user_actions.push([this.state.name, \"keyPress_enter\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], state ]);\r\n        }\r\n\r\n        // handle tab press\r\n        else if (e.key === \"Tab\") {\r\n          user_actions.push([this.state.name, \"keyPress_tab\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], state]);\r\n        }\r\n\r\n        // all other press \r\n        else {\r\n          user_actions.push([this.state.name, \"keyPress\", chn_copy[0][0], chn_copy[0][1], null, this.state.curr_table, chn_copy[0][0] + 1, col_headers[chn_copy[0][1]], state]);\r\n        }\r\n      }\r\n      this.check_cell_change();\r\n    }\r\n    console.log(user_actions);\r\n  }\r\n\r\n  store_training_data = () => {\r\n    user_actions.push([this.state.name, \"END_TRAINING_DATA\", null, null, null, this.state.curr_table, null, null, \"END\"]);\r\n    let action_package = {\r\n      user_actions: user_actions\r\n    }\r\n    //POST req here\r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({action_package})\r\n    };\r\n    fetch('https://spreadsheetactions.herokuapp.com/training/send-training-data/management', requestOptions);\r\n\r\n    // bring up the confirmation modal\r\n    this.toggleCompleteConfirmModal();\r\n  }\r\n\r\n  select_simulation = (e) => {\r\n    // e.preventDefault();\r\n\r\n    if (e.target.name === \"academic\") {\r\n      this.setState({\r\n        redirect_link: '/academic'\r\n      })\r\n    }\r\n    if (e.target.name === \"financing\") {\r\n      this.setState({\r\n        redirect_link: '/financing'\r\n      })\r\n    }\r\n    if (e.target.name === \"management\") {\r\n      this.setState({\r\n        redirect_link: '/management'\r\n      })\r\n    }\r\n    this.toggleRedirectConfirmModal();\r\n  }\r\n\r\n  toggle = (tab) => {\r\n    if (this.state.activeTab !== tab) {\r\n        this.setState({ activeTab: tab });\r\n    }\r\n    if (tab === \"1\") {  \r\n      this.setState({\r\n        curr_table: \"schedule_v1\"\r\n      })\r\n      col_headers = schedule_v1_col_headers;\r\n\r\n    } else if (tab === \"2\") {\r\n      this.setState({\r\n        curr_table: \"schedule_v2\"\r\n      })\r\n      col_headers = schedule_v2_col_headers;\r\n\r\n    } else if (tab === \"3\") {\r\n      this.setState({\r\n        curr_table: \"progress_log\"\r\n      })\r\n      col_headers = progress_col_headers;\r\n    }\r\n  }\r\n\r\n  load_tables = (e) => {\r\n    e.preventDefault();\r\n    if (table_loaded) {\r\n      this.toggleInstructionModal();\r\n    } else {\r\n      table_loaded = true;\r\n      utils.load_simulation_v3(1, \"employee_schedule_v1\", schedule_v1_display, buffer_copy, schedule_v1_col_headers);\r\n      utils.load_simulation_v3(1, \"employee_schedule_v2\", schedule_v2_display, buffer_copy, schedule_v2_col_headers);\r\n      utils.load_simulation_v3(1, \"progress_log\", progress_display, buffer_copy, progress_col_headers);\r\n      setTimeout(() => {\r\n          schedule_v1_display = [schedule_v1_col_headers].concat(schedule_v1_display);\r\n          schedule_v2_display = [schedule_v2_col_headers].concat(schedule_v2_display);\r\n          progress_display = [progress_col_headers].concat(progress_display);\r\n          this.toggleInstructionModal();\r\n      }, 500);\r\n      col_headers = schedule_v1_col_headers;\r\n      this.toggleNameModal();\r\n    }\r\n  }\r\n\r\n  reload_tables = () => {\r\n    utils.load_simulation_v3(1, \"employee_schedule_v1\", schedule_v1_display, buffer_copy, schedule_v1_col_headers);\r\n    utils.load_simulation_v3(1, \"employee_schedule_v2\", schedule_v2_display, buffer_copy, schedule_v2_col_headers);\r\n    utils.load_simulation_v3(1, \"progress_log\", progress_display, buffer_copy, progress_col_headers);\r\n    setTimeout(() => {\r\n        schedule_v1_display = [schedule_v1_col_headers].concat(schedule_v1_display);\r\n        schedule_v2_display = [schedule_v2_col_headers].concat(schedule_v2_display);\r\n        progress_display = [progress_col_headers].concat(progress_display);\r\n    }, 500);\r\n    col_headers = schedule_v1_col_headers;\r\n  }\r\n\r\n  redirect = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      redirect: true\r\n    })\r\n\r\n    // reset all display\r\n    schedule_v1_display = [];\r\n    schedule_v2_display = [];\r\n    progress_display = [];\r\n    schedule_v1_col_headers = [];\r\n    schedule_v2_col_headers = [];\r\n    progress_col_headers = [];\r\n\r\n    // clear recorded actions\r\n    user_actions = [];\r\n    table_loaded = false;\r\n  }\r\n\r\n  onNameSubmit = (e) => {\r\n    this.setState({\r\n        [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  submitName = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"state name is: \", this.state.name);\r\n\r\n    let name_package = {\r\n      user_name: this.state.name,\r\n      simulation: \"management\"\r\n    }\r\n    this.socket.emit('SEND_USERNAME', name_package);\r\n    this.toggleNameModal();\r\n  }\r\n\r\n  restart = () => {\r\n    // reset all display\r\n    schedule_v1_display = [];\r\n    schedule_v2_display = [];\r\n    progress_display = [];\r\n    schedule_v1_col_headers = [];\r\n    schedule_v2_col_headers = [];\r\n    progress_col_headers = [];\r\n\r\n    // reload all tables\r\n    this.reload_tables();\r\n\r\n    // clear recorded actions\r\n    user_actions = [];\r\n\r\n    // set tab\r\n    this.setState({\r\n      activeTab: '1'\r\n    })\r\n    this.toggle('1');\r\n\r\n    // toggle restart confirmation\r\n    this.toggleRestartModal();\r\n  }\r\n\r\n  close_confirmation = () => {\r\n    user_actions = []\r\n    this.toggleCompleteConfirmModal();\r\n  }\r\n\r\n  render() {\r\n    if (this.state.redirect) {\r\n      return <Redirect to={this.state.redirect_link} />\r\n    }\r\n    return (\r\n      <div onClick={e => this.track_action(e, \"click\")} onKeyUp={e => this.track_action(e, \"key_press\")} className=\"App\">\r\n        <script src=\"node_modules/handsontable/dist/handsontable.full.min.js\"></script>\r\n        <link href=\"node_modules/handsontable/dist/handsontable.full.min.css\" rel=\"stylesheet\" media=\"screen\"></link>\r\n         <Jumbotron className='logo-jumbo'>\r\n         <ButtonDropdown isOpen={this.state.collapsed} toggle={this.toggleNavbar} style={{float: 'left'}} className=\"up-margin-one\">\r\n              <DropdownToggle color=\"#61dafb\"  caret style={{float: 'right'}}>\r\n                Change Simulation\r\n              </DropdownToggle>\r\n              <DropdownMenu>\r\n                <DropdownItem name=\"academic\" id=\"academic\" onClick={e => this.select_simulation(e)}>Academic Simulation</DropdownItem>\r\n                <DropdownItem divider />\r\n                <DropdownItem name=\"financing\" id=\"financing\" onClick={e => this.select_simulation(e)}>Financing Simulation</DropdownItem>\r\n              </DropdownMenu>\r\n          </ButtonDropdown>\r\n          </Jumbotron >\r\n          <div>\r\n            <Jumbotron >\r\n                \r\n                  <h1 className=\"display-3\">Hi {this.state.name}, welcome to Management Simulation!</h1>\r\n                  <p className=\"lead\">This is a simple web interface that allows you to upload spreadsheets and retrieve data.</p>\r\n                  <hr className=\"my-2\" />\r\n                  {this.state.user_text_block}\r\n                  <p className=\"lead\">\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    {transaction_button}\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.store_training_data} >Complete Simulation</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.restart} >Restart Simulation</Button>\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleInstructionModal} >Instruction</Button>\r\n                  </p>\r\n                  {this.state.edit_message}\r\n\r\n                  <Modal size='lg' isOpen={this.state.isInstructionOpen} >\r\n                    {/* <ModalHeader ><header>Simulation Instruction</header>  </ModalHeader> */}\r\n                    <ModalBody>\r\n                        <h2>Welcome</h2>\r\n                        Welcome to Management Simulation! This instruction can be accessed at any time by clicking the \"Instruction\" button on this webpage. \r\n                        Under this simulation, there are three tables: an \"Employee Schedule\" table, an \"Employee Shifts\" table, and a \"Task List\" table. This simulation has \r\n                        three parts.  \r\n                        <hr className=\"my-2\" />\r\n                        \r\n\r\n                        <p className=\"margin-one\">\r\n                        <h2>Part 1</h2>\r\n                        For Part 1 of this simulation, you are to fill out the \"Employee Schedule\" table based on the descriptions in \"Story 1\" under the \"Story\" section in the \r\n                        instruction document we sent you via email. If you did not receive the document, please contact ninghan2@illinois.edu. Inside the Employee Schedule table, \r\n                        the columns Employee ID and Name refer to the id's and names of the employees, respectively. All the other fields are self-explanatory.\r\n                        <br/>\r\n                        <h5>Note: </h5>\r\n                        When you finish this part, press the Complete Simulation button on your screen to submit and start the next part. \r\n                        </p>\r\n                        <hr className=\"my-2\" />\r\n\r\n\r\n                        <p className=\"margin-one\">\r\n                        <h2>Part 2</h2>\r\n                        For part 2 of this simulation, you are to fill out the Employee Shifts table based on the descriptions in Story 2 under the Story section in the \r\n                        instruction document we sent you via email. If you did not received the document, please contact ninghan2@illinois.edu. All the fields in the Employee Shifts \r\n                        table are quite self-explanatory.   \r\n                        <br/>\r\n                        <h5>Note: </h5>\r\n                        When you finish this part, press the Complete Simulation button on your screen to submit and start the next part. \r\n                        </p>\r\n\r\n                        <p className=\"margin-one\">\r\n                        <h2>Part 3</h2>\r\n                        For part 3 of this simulation, you are to fill out the Task List table based on the descriptions in Story 3 under the Story section in the \r\n                        instruction document we sent you via email. If you did not received the document, please contact ninghan2@illinois.edu. Inside the Task List table, \r\n                        the Task ID column is the feature that differentiates each task, and it is your choice to fill in whatever id system you want (E.g. one, \r\n                        two,  or 001, 002), as long as it is logical. The Task column is a description of the task, which you can write in your own words. The \r\n                        Deadline column is the deadline of the corresponding task. The Employee ID and Name columns refer to the employee id and employee name of \r\n                        the employee that is responsible for that task, respectively. The Hour Spent column is the approximate hours that the responsible employee has spent \r\n                        on this task. The Status column refers to the current progress of the task, which you can also write in your own words, but should be logical. \r\n                        <br/>\r\n                        <h5>Note: </h5>\r\n                        When you finish this part, press the Complete Simulation button on your screen to submit. \r\n                        </p>\r\n\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button size='lg' className='display-button' color=\"info\" onClick={this.load_tables}>Got it!</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isRedirectConfirmOpen} toggle={this.toggleRedirectConfirmModal}>\r\n                    <ModalHeader toggle={this.toggleRedirectConfirmModal}>Are you sure you want to leave this page?</ModalHeader>\r\n                    <ModalBody>\r\n                      Note that once you leave this simulation page, you will lose all the records and progress on this simulation. \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.redirect}>Confirm</Button> {' '}\r\n                    <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleRedirectConfirmModal}>Cancel</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isNameModalOpen} toggle={this.toggleNameModal}>\r\n                    <ModalHeader toggle={this.toggleNameModal}>Please Enter Your Full Name</ModalHeader>\r\n                    <ModalBody>\r\n                      <Form onSubmit={this.submitName}>\r\n                        <FormGroup>\r\n                          <Label for=\"user_name\">Enter Full Name</Label>\r\n                          <Input type=\"text\" name=\"name\" id=\"name\" onChange={e => this.onNameSubmit(e)} />\r\n                        </FormGroup>\r\n                        <Button size='lg' color=\"primary\" className='single_search_submit' type=\"submit\" >Confirm</Button> {' '}\r\n                      </Form>\r\n                    </ModalBody>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isRestartModalOpen} toggle={this.toggleRestartModal}>\r\n                    <ModalHeader toggle={this.toggleRestartModal}>Please Enter Your Full Name</ModalHeader>\r\n                    <ModalBody>\r\n                      Your simulation has been restarted. All the changes that haven't been committed yet are clearned. \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                      <Button size='lg' className='display-button' color=\"info\" onClick={this.toggleRestartModal}>Got It</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n\r\n                  <Modal size='lg' isOpen={this.state.isCompleteConfirmationModalOpen} toggle={this.toggleCompleteConfirmModal}>\r\n                    <ModalHeader toggle={this.toggleRestartModal}>Complete Confirmation</ModalHeader>\r\n                    <ModalBody>\r\n                      The simulation has been completed and submitted! You can simply close this webpage. If you submitted by mistake or \r\n                      need to report an error, please contact ninghan2@illinois.edu \r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                      <Button size='lg' className='display-button' color=\"info\" onClick={this.close_confirmation}>Got It</Button>\r\n                    </ModalFooter>\r\n                  </Modal>\r\n                        \r\n            </Jumbotron>\r\n        </div>\r\n        {/* <hr /> */}\r\n\r\n        <Nav tabs>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '1' })}\r\n                    onClick={() => { this.toggle('1'); }}>\r\n                    Employee Schedule\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '2' })}\r\n                    onClick={() => { this.toggle('2'); }}>\r\n                    Employee Shifts\r\n                </NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink\r\n                    className={classnames({ active: this.state.activeTab === '3' })}\r\n                    onClick={() => { this.toggle('3'); }}>\r\n                    Task List\r\n                </NavLink>\r\n            </NavItem>\r\n        </Nav>\r\n        <TabContent activeTab={this.state.activeTab}>\r\n            <TabPane tabId=\"1\">\r\n                <h4>\r\n                    Employee Schedule Table\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"1\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={schedule_v1_display} ref={this.hotTableComponent} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"2\">\r\n                <h4>\r\n                    Employee Shifts Table\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"1\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={schedule_v2_display} ref={this.hotTableComponent1} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n            <TabPane tabId=\"3\">\r\n                <h4>\r\n                    Task List Table\r\n                </h4> \r\n                <div id = \"display_portion\" onScrollCapture={e => this.track_action(e, \"scroll\")}  tabIndex=\"1\">\r\n                    <HotTable className=\"handsontable\" id =\"display_table\" data={progress_display} ref={this.hotTableComponent2} id={this.id}\r\n                        colHeaders={true} \r\n                        rowHeaders={true} \r\n                        width=\"100%\" \r\n                        height=\"300\"\r\n                        colWidths=\"100%\"\r\n                        rowHeights=\"25\"\r\n                        contextMenu={true}\r\n                        formulas={true}\r\n                        readOnly={!this.state.transaction_mode}\r\n                    />\r\n                </div>\r\n                    \r\n            </TabPane>\r\n        </TabContent>\r\n          \r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nexport default Management;\r\n",{"ruleId":"226","replacedBy":"227"},{"ruleId":"228","replacedBy":"229"},{"ruleId":"230","severity":1,"message":"231","line":1,"column":28,"nodeType":"232","messageId":"233","endLine":1,"endColumn":36},{"ruleId":"230","severity":1,"message":"234","line":3,"column":40,"nodeType":"232","messageId":"233","endLine":3,"endColumn":50},{"ruleId":"226","replacedBy":"235"},{"ruleId":"228","replacedBy":"236"},{"ruleId":"237","severity":1,"message":"238","line":45,"column":62,"nodeType":"239","messageId":"240","endLine":45,"endColumn":63},{"ruleId":"230","severity":1,"message":"231","line":1,"column":28,"nodeType":"232","messageId":"233","endLine":1,"endColumn":36},{"ruleId":"230","severity":1,"message":"241","line":2,"column":8,"nodeType":"232","messageId":"233","endLine":2,"endColumn":16},{"ruleId":"230","severity":1,"message":"242","line":6,"column":3,"nodeType":"232","messageId":"233","endLine":6,"endColumn":11},{"ruleId":"230","severity":1,"message":"243","line":7,"column":3,"nodeType":"232","messageId":"233","endLine":7,"endColumn":9},{"ruleId":"230","severity":1,"message":"244","line":8,"column":3,"nodeType":"232","messageId":"233","endLine":8,"endColumn":16},{"ruleId":"230","severity":1,"message":"245","line":9,"column":3,"nodeType":"232","messageId":"233","endLine":9,"endColumn":14},{"ruleId":"230","severity":1,"message":"246","line":10,"column":3,"nodeType":"232","messageId":"233","endLine":10,"endColumn":12},{"ruleId":"230","severity":1,"message":"247","line":14,"column":3,"nodeType":"232","messageId":"233","endLine":14,"endColumn":6},{"ruleId":"230","severity":1,"message":"248","line":15,"column":3,"nodeType":"232","messageId":"233","endLine":15,"endColumn":10},{"ruleId":"230","severity":1,"message":"249","line":16,"column":3,"nodeType":"232","messageId":"233","endLine":16,"endColumn":10},{"ruleId":"230","severity":1,"message":"250","line":18,"column":3,"nodeType":"232","messageId":"233","endLine":18,"endColumn":8},{"ruleId":"230","severity":1,"message":"251","line":18,"column":85,"nodeType":"232","messageId":"233","endLine":18,"endColumn":94},{"ruleId":"230","severity":1,"message":"252","line":21,"column":20,"nodeType":"232","messageId":"233","endLine":21,"endColumn":26},{"ruleId":"230","severity":1,"message":"253","line":22,"column":3,"nodeType":"232","messageId":"233","endLine":22,"endColumn":8},{"ruleId":"230","severity":1,"message":"254","line":23,"column":3,"nodeType":"232","messageId":"233","endLine":23,"endColumn":7},{"ruleId":"226","replacedBy":"255"},{"ruleId":"228","replacedBy":"256"},{"ruleId":"230","severity":1,"message":"231","line":1,"column":28,"nodeType":"232","messageId":"233","endLine":1,"endColumn":36},{"ruleId":"230","severity":1,"message":"241","line":2,"column":8,"nodeType":"232","messageId":"233","endLine":2,"endColumn":16},{"ruleId":"230","severity":1,"message":"242","line":7,"column":3,"nodeType":"232","messageId":"233","endLine":7,"endColumn":11},{"ruleId":"230","severity":1,"message":"243","line":8,"column":3,"nodeType":"232","messageId":"233","endLine":8,"endColumn":9},{"ruleId":"230","severity":1,"message":"244","line":9,"column":3,"nodeType":"232","messageId":"233","endLine":9,"endColumn":16},{"ruleId":"230","severity":1,"message":"245","line":10,"column":3,"nodeType":"232","messageId":"233","endLine":10,"endColumn":14},{"ruleId":"230","severity":1,"message":"246","line":11,"column":3,"nodeType":"232","messageId":"233","endLine":11,"endColumn":12},{"ruleId":"230","severity":1,"message":"257","line":12,"column":3,"nodeType":"232","messageId":"233","endLine":12,"endColumn":6},{"ruleId":"230","severity":1,"message":"258","line":13,"column":3,"nodeType":"232","messageId":"233","endLine":13,"endColumn":6},{"ruleId":"230","severity":1,"message":"251","line":19,"column":85,"nodeType":"232","messageId":"233","endLine":19,"endColumn":94},{"ruleId":"230","severity":1,"message":"259","line":19,"column":96,"nodeType":"232","messageId":"233","endLine":19,"endColumn":100},{"ruleId":"230","severity":1,"message":"260","line":19,"column":102,"nodeType":"232","messageId":"233","endLine":19,"endColumn":111},{"ruleId":"230","severity":1,"message":"261","line":19,"column":113,"nodeType":"232","messageId":"233","endLine":19,"endColumn":121},{"ruleId":"230","severity":1,"message":"262","line":19,"column":144,"nodeType":"232","messageId":"233","endLine":19,"endColumn":158},{"ruleId":"230","severity":1,"message":"263","line":19,"column":160,"nodeType":"232","messageId":"233","endLine":19,"endColumn":168},{"ruleId":"230","severity":1,"message":"264","line":19,"column":170,"nodeType":"232","messageId":"233","endLine":19,"endColumn":184},{"ruleId":"230","severity":1,"message":"265","line":19,"column":186,"nodeType":"232","messageId":"233","endLine":19,"endColumn":198},{"ruleId":"230","severity":1,"message":"266","line":19,"column":200,"nodeType":"232","messageId":"233","endLine":19,"endColumn":212},{"ruleId":"230","severity":1,"message":"267","line":19,"column":214,"nodeType":"232","messageId":"233","endLine":19,"endColumn":233},{"ruleId":"230","severity":1,"message":"252","line":22,"column":20,"nodeType":"232","messageId":"233","endLine":22,"endColumn":26},{"ruleId":"230","severity":1,"message":"253","line":23,"column":3,"nodeType":"232","messageId":"233","endLine":23,"endColumn":8},{"ruleId":"230","severity":1,"message":"254","line":24,"column":3,"nodeType":"232","messageId":"233","endLine":24,"endColumn":7},{"ruleId":"230","severity":1,"message":"268","line":25,"column":3,"nodeType":"232","messageId":"233","endLine":25,"endColumn":13},{"ruleId":"230","severity":1,"message":"269","line":37,"column":5,"nodeType":"232","messageId":"233","endLine":37,"endColumn":27},{"ruleId":"230","severity":1,"message":"270","line":54,"column":5,"nodeType":"232","messageId":"233","endLine":54,"endColumn":31},{"ruleId":"230","severity":1,"message":"271","line":62,"column":5,"nodeType":"232","messageId":"233","endLine":62,"endColumn":16},{"ruleId":"230","severity":1,"message":"272","line":64,"column":5,"nodeType":"232","messageId":"233","endLine":64,"endColumn":27},{"ruleId":"230","severity":1,"message":"273","line":66,"column":5,"nodeType":"232","messageId":"233","endLine":66,"endColumn":9},{"ruleId":"230","severity":1,"message":"274","line":66,"column":17,"nodeType":"232","messageId":"233","endLine":66,"endColumn":23},{"ruleId":"230","severity":1,"message":"275","line":66,"column":30,"nodeType":"232","messageId":"233","endLine":66,"endColumn":41},{"ruleId":"230","severity":1,"message":"276","line":68,"column":5,"nodeType":"232","messageId":"233","endLine":68,"endColumn":17},{"ruleId":"230","severity":1,"message":"277","line":69,"column":5,"nodeType":"232","messageId":"233","endLine":69,"endColumn":12},{"ruleId":"230","severity":1,"message":"278","line":71,"column":5,"nodeType":"232","messageId":"233","endLine":71,"endColumn":17},{"ruleId":"230","severity":1,"message":"279","line":75,"column":5,"nodeType":"232","messageId":"233","endLine":75,"endColumn":24},{"ruleId":"230","severity":1,"message":"280","line":76,"column":5,"nodeType":"232","messageId":"233","endLine":76,"endColumn":13},{"ruleId":"281","severity":1,"message":"282","line":202,"column":17,"nodeType":"239","messageId":"283","endLine":202,"endColumn":19},{"ruleId":"284","severity":1,"message":"285","line":276,"column":22,"nodeType":"232","messageId":"286","endLine":276,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":283,"column":22,"nodeType":"232","messageId":"286","endLine":283,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":290,"column":22,"nodeType":"232","messageId":"286","endLine":290,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":297,"column":22,"nodeType":"232","messageId":"286","endLine":297,"endColumn":23},{"ruleId":"284","severity":1,"message":"287","line":368,"column":22,"nodeType":"232","messageId":"286","endLine":368,"endColumn":23},{"ruleId":"230","severity":1,"message":"288","line":1036,"column":7,"nodeType":"232","messageId":"233","endLine":1036,"endColumn":16},{"ruleId":"230","severity":1,"message":"289","line":1037,"column":7,"nodeType":"232","messageId":"233","endLine":1037,"endColumn":16},{"ruleId":"230","severity":1,"message":"290","line":1168,"column":5,"nodeType":"232","messageId":"233","endLine":1168,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1250,"column":18,"nodeType":"232","messageId":"286","endLine":1250,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1295,"column":18,"nodeType":"232","messageId":"286","endLine":1295,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1339,"column":18,"nodeType":"232","messageId":"286","endLine":1339,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1378,"column":18,"nodeType":"232","messageId":"286","endLine":1378,"endColumn":19},{"ruleId":"230","severity":1,"message":"291","line":1389,"column":13,"nodeType":"232","messageId":"233","endLine":1389,"endColumn":27},{"ruleId":"281","severity":1,"message":"282","line":1887,"column":26,"nodeType":"239","messageId":"283","endLine":1887,"endColumn":28},{"ruleId":"281","severity":1,"message":"282","line":1887,"column":54,"nodeType":"239","messageId":"283","endLine":1887,"endColumn":56},{"ruleId":"281","severity":1,"message":"282","line":1887,"column":84,"nodeType":"239","messageId":"283","endLine":1887,"endColumn":86},{"ruleId":"292","severity":1,"message":"293","line":2099,"column":131,"nodeType":"294","endLine":2099,"endColumn":143},{"ruleId":"292","severity":1,"message":"293","line":2118,"column":132,"nodeType":"294","endLine":2118,"endColumn":144},{"ruleId":"292","severity":1,"message":"293","line":2137,"column":130,"nodeType":"294","endLine":2137,"endColumn":142},{"ruleId":"292","severity":1,"message":"293","line":2156,"column":133,"nodeType":"294","endLine":2156,"endColumn":145},{"ruleId":"292","severity":1,"message":"293","line":2175,"column":135,"nodeType":"294","endLine":2175,"endColumn":147},{"ruleId":"230","severity":1,"message":"231","line":1,"column":28,"nodeType":"232","messageId":"233","endLine":1,"endColumn":36},{"ruleId":"230","severity":1,"message":"241","line":2,"column":8,"nodeType":"232","messageId":"233","endLine":2,"endColumn":16},{"ruleId":"230","severity":1,"message":"243","line":8,"column":3,"nodeType":"232","messageId":"233","endLine":8,"endColumn":9},{"ruleId":"230","severity":1,"message":"257","line":9,"column":3,"nodeType":"232","messageId":"233","endLine":9,"endColumn":6},{"ruleId":"230","severity":1,"message":"258","line":10,"column":3,"nodeType":"232","messageId":"233","endLine":10,"endColumn":6},{"ruleId":"230","severity":1,"message":"262","line":16,"column":99,"nodeType":"232","messageId":"233","endLine":16,"endColumn":113},{"ruleId":"230","severity":1,"message":"263","line":16,"column":115,"nodeType":"232","messageId":"233","endLine":16,"endColumn":123},{"ruleId":"230","severity":1,"message":"264","line":16,"column":125,"nodeType":"232","messageId":"233","endLine":16,"endColumn":139},{"ruleId":"230","severity":1,"message":"265","line":16,"column":141,"nodeType":"232","messageId":"233","endLine":16,"endColumn":153},{"ruleId":"230","severity":1,"message":"266","line":16,"column":155,"nodeType":"232","messageId":"233","endLine":16,"endColumn":167},{"ruleId":"230","severity":1,"message":"252","line":19,"column":20,"nodeType":"232","messageId":"233","endLine":19,"endColumn":26},{"ruleId":"230","severity":1,"message":"253","line":20,"column":3,"nodeType":"232","messageId":"233","endLine":20,"endColumn":8},{"ruleId":"230","severity":1,"message":"254","line":21,"column":3,"nodeType":"232","messageId":"233","endLine":21,"endColumn":7},{"ruleId":"230","severity":1,"message":"295","line":22,"column":3,"nodeType":"232","messageId":"233","endLine":22,"endColumn":11},{"ruleId":"230","severity":1,"message":"296","line":31,"column":5,"nodeType":"232","messageId":"233","endLine":31,"endColumn":27},{"ruleId":"230","severity":1,"message":"297","line":38,"column":5,"nodeType":"232","messageId":"233","endLine":38,"endColumn":20},{"ruleId":"230","severity":1,"message":"298","line":51,"column":5,"nodeType":"232","messageId":"233","endLine":51,"endColumn":31},{"ruleId":"230","severity":1,"message":"271","line":59,"column":5,"nodeType":"232","messageId":"233","endLine":59,"endColumn":16},{"ruleId":"230","severity":1,"message":"273","line":61,"column":5,"nodeType":"232","messageId":"233","endLine":61,"endColumn":9},{"ruleId":"230","severity":1,"message":"299","line":61,"column":16,"nodeType":"232","messageId":"233","endLine":61,"endColumn":26},{"ruleId":"230","severity":1,"message":"300","line":61,"column":33,"nodeType":"232","messageId":"233","endLine":61,"endColumn":40},{"ruleId":"230","severity":1,"message":"274","line":61,"column":47,"nodeType":"232","messageId":"233","endLine":61,"endColumn":53},{"ruleId":"230","severity":1,"message":"275","line":61,"column":60,"nodeType":"232","messageId":"233","endLine":61,"endColumn":71},{"ruleId":"230","severity":1,"message":"301","line":63,"column":5,"nodeType":"232","messageId":"233","endLine":63,"endColumn":18},{"ruleId":"230","severity":1,"message":"302","line":64,"column":5,"nodeType":"232","messageId":"233","endLine":64,"endColumn":11},{"ruleId":"230","severity":1,"message":"277","line":65,"column":5,"nodeType":"232","messageId":"233","endLine":65,"endColumn":12},{"ruleId":"230","severity":1,"message":"278","line":67,"column":5,"nodeType":"232","messageId":"233","endLine":67,"endColumn":17},{"ruleId":"230","severity":1,"message":"279","line":71,"column":5,"nodeType":"232","messageId":"233","endLine":71,"endColumn":24},{"ruleId":"230","severity":1,"message":"280","line":72,"column":5,"nodeType":"232","messageId":"233","endLine":72,"endColumn":13},{"ruleId":"230","severity":1,"message":"303","line":78,"column":5,"nodeType":"232","messageId":"233","endLine":78,"endColumn":15},{"ruleId":"230","severity":1,"message":"304","line":79,"column":5,"nodeType":"232","messageId":"233","endLine":79,"endColumn":15},{"ruleId":"230","severity":1,"message":"305","line":80,"column":5,"nodeType":"232","messageId":"233","endLine":80,"endColumn":19},{"ruleId":"230","severity":1,"message":"306","line":81,"column":5,"nodeType":"232","messageId":"233","endLine":81,"endColumn":21},{"ruleId":"230","severity":1,"message":"307","line":87,"column":5,"nodeType":"232","messageId":"233","endLine":87,"endColumn":32},{"ruleId":"230","severity":1,"message":"272","line":88,"column":5,"nodeType":"232","messageId":"233","endLine":88,"endColumn":27},{"ruleId":"281","severity":1,"message":"282","line":205,"column":17,"nodeType":"239","messageId":"283","endLine":205,"endColumn":19},{"ruleId":"284","severity":1,"message":"285","line":278,"column":22,"nodeType":"232","messageId":"286","endLine":278,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":285,"column":22,"nodeType":"232","messageId":"286","endLine":285,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":292,"column":22,"nodeType":"232","messageId":"286","endLine":292,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":299,"column":22,"nodeType":"232","messageId":"286","endLine":299,"endColumn":23},{"ruleId":"230","severity":1,"message":"288","line":814,"column":7,"nodeType":"232","messageId":"233","endLine":814,"endColumn":16},{"ruleId":"230","severity":1,"message":"289","line":815,"column":7,"nodeType":"232","messageId":"233","endLine":815,"endColumn":16},{"ruleId":"230","severity":1,"message":"290","line":940,"column":5,"nodeType":"232","messageId":"233","endLine":940,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1022,"column":18,"nodeType":"232","messageId":"286","endLine":1022,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1067,"column":18,"nodeType":"232","messageId":"286","endLine":1067,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1112,"column":18,"nodeType":"232","messageId":"286","endLine":1112,"endColumn":19},{"ruleId":"284","severity":1,"message":"287","line":1150,"column":18,"nodeType":"232","messageId":"286","endLine":1150,"endColumn":19},{"ruleId":"230","severity":1,"message":"308","line":1226,"column":13,"nodeType":"232","messageId":"233","endLine":1226,"endColumn":27},{"ruleId":"281","severity":1,"message":"282","line":1640,"column":26,"nodeType":"239","messageId":"283","endLine":1640,"endColumn":28},{"ruleId":"281","severity":1,"message":"282","line":1640,"column":54,"nodeType":"239","messageId":"283","endLine":1640,"endColumn":56},{"ruleId":"281","severity":1,"message":"282","line":1640,"column":84,"nodeType":"239","messageId":"283","endLine":1640,"endColumn":86},{"ruleId":"292","severity":1,"message":"293","line":1823,"column":136,"nodeType":"294","endLine":1823,"endColumn":148},{"ruleId":"292","severity":1,"message":"293","line":1842,"column":132,"nodeType":"294","endLine":1842,"endColumn":144},{"ruleId":"292","severity":1,"message":"293","line":1861,"column":133,"nodeType":"294","endLine":1861,"endColumn":145},{"ruleId":"292","severity":1,"message":"293","line":1880,"column":133,"nodeType":"294","endLine":1880,"endColumn":145},{"ruleId":"292","severity":1,"message":"293","line":1899,"column":131,"nodeType":"294","endLine":1899,"endColumn":143},{"ruleId":"226","replacedBy":"309"},{"ruleId":"228","replacedBy":"310"},{"ruleId":"230","severity":1,"message":"231","line":1,"column":28,"nodeType":"232","messageId":"233","endLine":1,"endColumn":36},{"ruleId":"230","severity":1,"message":"241","line":2,"column":8,"nodeType":"232","messageId":"233","endLine":2,"endColumn":16},{"ruleId":"230","severity":1,"message":"242","line":8,"column":3,"nodeType":"232","messageId":"233","endLine":8,"endColumn":11},{"ruleId":"230","severity":1,"message":"243","line":9,"column":3,"nodeType":"232","messageId":"233","endLine":9,"endColumn":9},{"ruleId":"230","severity":1,"message":"244","line":10,"column":3,"nodeType":"232","messageId":"233","endLine":10,"endColumn":16},{"ruleId":"230","severity":1,"message":"245","line":11,"column":3,"nodeType":"232","messageId":"233","endLine":11,"endColumn":14},{"ruleId":"230","severity":1,"message":"246","line":12,"column":3,"nodeType":"232","messageId":"233","endLine":12,"endColumn":12},{"ruleId":"230","severity":1,"message":"257","line":13,"column":3,"nodeType":"232","messageId":"233","endLine":13,"endColumn":6},{"ruleId":"230","severity":1,"message":"258","line":14,"column":3,"nodeType":"232","messageId":"233","endLine":14,"endColumn":6},{"ruleId":"230","severity":1,"message":"250","line":20,"column":3,"nodeType":"232","messageId":"233","endLine":20,"endColumn":8},{"ruleId":"230","severity":1,"message":"251","line":20,"column":85,"nodeType":"232","messageId":"233","endLine":20,"endColumn":94},{"ruleId":"230","severity":1,"message":"259","line":20,"column":96,"nodeType":"232","messageId":"233","endLine":20,"endColumn":100},{"ruleId":"230","severity":1,"message":"260","line":20,"column":102,"nodeType":"232","messageId":"233","endLine":20,"endColumn":111},{"ruleId":"230","severity":1,"message":"261","line":20,"column":113,"nodeType":"232","messageId":"233","endLine":20,"endColumn":121},{"ruleId":"230","severity":1,"message":"263","line":20,"column":160,"nodeType":"232","messageId":"233","endLine":20,"endColumn":168},{"ruleId":"230","severity":1,"message":"252","line":23,"column":20,"nodeType":"232","messageId":"233","endLine":23,"endColumn":26},{"ruleId":"230","severity":1,"message":"253","line":24,"column":3,"nodeType":"232","messageId":"233","endLine":24,"endColumn":8},{"ruleId":"230","severity":1,"message":"254","line":25,"column":3,"nodeType":"232","messageId":"233","endLine":25,"endColumn":7},{"ruleId":"230","severity":1,"message":"268","line":26,"column":3,"nodeType":"232","messageId":"233","endLine":26,"endColumn":13},{"ruleId":"230","severity":1,"message":"297","line":40,"column":5,"nodeType":"232","messageId":"233","endLine":40,"endColumn":20},{"ruleId":"230","severity":1,"message":"273","line":58,"column":5,"nodeType":"232","messageId":"233","endLine":58,"endColumn":9},{"ruleId":"230","severity":1,"message":"299","line":58,"column":16,"nodeType":"232","messageId":"233","endLine":58,"endColumn":26},{"ruleId":"230","severity":1,"message":"300","line":58,"column":33,"nodeType":"232","messageId":"233","endLine":58,"endColumn":40},{"ruleId":"230","severity":1,"message":"301","line":59,"column":5,"nodeType":"232","messageId":"233","endLine":59,"endColumn":18},{"ruleId":"230","severity":1,"message":"302","line":60,"column":5,"nodeType":"232","messageId":"233","endLine":60,"endColumn":11},{"ruleId":"230","severity":1,"message":"277","line":61,"column":5,"nodeType":"232","messageId":"233","endLine":61,"endColumn":12},{"ruleId":"230","severity":1,"message":"279","line":67,"column":5,"nodeType":"232","messageId":"233","endLine":67,"endColumn":24},{"ruleId":"230","severity":1,"message":"280","line":68,"column":5,"nodeType":"232","messageId":"233","endLine":68,"endColumn":13},{"ruleId":"230","severity":1,"message":"303","line":74,"column":5,"nodeType":"232","messageId":"233","endLine":74,"endColumn":15},{"ruleId":"230","severity":1,"message":"304","line":75,"column":5,"nodeType":"232","messageId":"233","endLine":75,"endColumn":15},{"ruleId":"230","severity":1,"message":"305","line":76,"column":5,"nodeType":"232","messageId":"233","endLine":76,"endColumn":19},{"ruleId":"230","severity":1,"message":"306","line":77,"column":5,"nodeType":"232","messageId":"233","endLine":77,"endColumn":21},{"ruleId":"230","severity":1,"message":"307","line":83,"column":5,"nodeType":"232","messageId":"233","endLine":83,"endColumn":32},{"ruleId":"230","severity":1,"message":"311","line":180,"column":7,"nodeType":"232","messageId":"233","endLine":180,"endColumn":16},{"ruleId":"281","severity":1,"message":"282","line":197,"column":17,"nodeType":"239","messageId":"283","endLine":197,"endColumn":19},{"ruleId":"230","severity":1,"message":"288","line":409,"column":7,"nodeType":"232","messageId":"233","endLine":409,"endColumn":16},{"ruleId":"230","severity":1,"message":"289","line":410,"column":7,"nodeType":"232","messageId":"233","endLine":410,"endColumn":16},{"ruleId":"230","severity":1,"message":"272","line":501,"column":5,"nodeType":"232","messageId":"233","endLine":501,"endColumn":27},{"ruleId":"284","severity":1,"message":"285","line":651,"column":20,"nodeType":"232","messageId":"286","endLine":651,"endColumn":21},{"ruleId":"284","severity":1,"message":"285","line":659,"column":22,"nodeType":"232","messageId":"286","endLine":659,"endColumn":23},{"ruleId":"284","severity":1,"message":"285","line":684,"column":20,"nodeType":"232","messageId":"286","endLine":684,"endColumn":21},{"ruleId":"284","severity":1,"message":"285","line":692,"column":22,"nodeType":"232","messageId":"286","endLine":692,"endColumn":23},{"ruleId":"292","severity":1,"message":"293","line":1088,"column":132,"nodeType":"294","endLine":1088,"endColumn":144},{"ruleId":"292","severity":1,"message":"293","line":1107,"column":133,"nodeType":"294","endLine":1107,"endColumn":145},{"ruleId":"292","severity":1,"message":"293","line":1126,"column":130,"nodeType":"294","endLine":1126,"endColumn":142},"no-native-reassign",["312"],"no-negated-in-lhs",["313"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'HashRouter' is defined but never used.",["312"],["313"],"no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","'ReactDOM' is defined but never used.","'Collapse' is defined but never used.","'Navbar' is defined but never used.","'NavbarToggler' is defined but never used.","'NavbarBrand' is defined but never used.","'Container' is defined but never used.","'Nav' is defined but never used.","'NavItem' is defined but never used.","'NavLink' is defined but never used.","'Table' is defined but never used.","'ListGroup' is defined but never used.","'Router' is defined but never used.","'Route' is defined but never used.","'Link' is defined but never used.",["312"],["313"],"'Row' is defined but never used.","'Col' is defined but never used.","'Card' is defined but never used.","'CardTitle' is defined but never used.","'CardText' is defined but never used.","'ButtonDropdown' is defined but never used.","'Dropdown' is defined but never used.","'DropdownToggle' is defined but never used.","'DropdownMenu' is defined but never used.","'DropdownItem' is defined but never used.","'UncontrolledTooltip' is defined but never used.","'useHistory' is defined but never used.","'student_status_display' is assigned a value but never used.","'student_status_col_headers' is assigned a value but never used.","'SCROLL_SIZE' is assigned a value but never used.","'display_dataset_button' is assigned a value but never used.","'data' is assigned a value but never used.","'buffer' is assigned a value but never used.","'buffer_copy' is assigned a value but never used.","'name_entered' is assigned a value but never used.","'ATT_NUM' is assigned a value but never used.","'data_display' is assigned a value but never used.","'current_fetch_index' is assigned a value but never used.","'num_attr' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","unexpected","no-redeclare","'i' is already defined.","redeclared","'j' is already defined.","'current_i' is assigned a value but never used.","'current_j' is assigned a value but never used.","'prev_scrolltop' is assigned a value but never used.","'search_key_idx' is assigned a value but never used.","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'Redirect' is defined but never used.","'monthly_income_display' is assigned a value but never used.","'simulation_type' is assigned a value but never used.","'monthly_income_col_headers' is assigned a value but never used.","'dataMatrix' is assigned a value but never used.","'columns' is assigned a value but never used.","'PREFETCH_SIZE' is assigned a value but never used.","'noData' is assigned a value but never used.","'conflict_i' is assigned a value but never used.","'conflict_j' is assigned a value but never used.","'incoming_value' is assigned a value but never used.","'conflict_message' is assigned a value but never used.","'apply_read_only_lock_button' is assigned a value but never used.","'requestOptions' is assigned a value but never used.",["312"],["313"],"'socket_id' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]